[["Map",1,2,9,10],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.1.1","content-config-digest","682c993dd4c41b42","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://blog.kratosmy.uk\",\"compressHTML\":false,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"server\",\"scopedStyleStrategy\":\"class\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":false,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true},\"redirects\":{},\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[]},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":false,\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"github-dark\",\"themes\":{},\"wrap\":false,\"transformers\":[]},\"remarkPlugins\":[null,null,[null,{\"permalinks\":[\"/clara-and-the-sun\",\"/cmu_15-213_lab0\",\"/crab-and-programmer\",\"/fast-git-introduction\",\"/how-to-do-technical-notes\",\"/league-of-legends-s12\",\"/movie-record-2022\",\"/movie-record-2023\",\"/simple-shell\",\"/simple-string\",\"/the-push\",\"/thinking-is-a-privilege\",\"/zhuang-zi-qi-wu-lun\"],\"pathFormat\":\"obsidian-short\"}]],\"rehypePlugins\":[[null,{}]],\"remarkRehype\":{\"footnoteLabel\":\" \"},\"gfm\":true,\"smartypants\":true},\"security\":{\"checkOrigin\":true},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"responsiveImages\":false},\"legacy\":{\"collections\":false}}","posts",["Map",11,12,41,42,59,60,103,104,127,128,151,152,176,177,199,200,224,225,244,245,261,262,283,284,312,313],"clara-and-the-sun",{"id":11,"data":13,"body":18,"filePath":19,"digest":20,"rendered":21,"legacyId":40},{"title":14,"tags":15,"date":17},"\u003C克拉拉与太阳>读后感",[16],"reading","2022-12-18","## 写在之前的话\n\n很久没写过读后感了，上次写应该还是在高中，从小学到高中读过很多书和期刊，也正是这些书塑造了我的一部分人格，所以我必须感谢这些书，以及给予我阅读条件的爸妈、外婆、老师。\n\n关于《克拉拉与太阳》这本书，从买回来到读完，花了快一年，深圳买来，上海读完，期间也换了工作，经历了似乎发生了很多事又似乎什么都没发生的 2022 年。\n\n至于我为什么花了一年才读完，相信现代人很能理解，因为手机和电脑已经占据了我们的工作与生活，重新拿起纸质书本就不容易。但仔细一想，其实每天读一些也能很快读完，说到底还是自己懒，但毕竟这是这几年第一本完整读完的纸质书，值得纪念一下。\n\n## 什么是克拉拉\n\n克拉拉是一个专为陪伴儿童而设计的太阳能人工智能机器人，具有极高的观察、推理与共情能力。在石黑一雄的采访中，他有提到很关注甚至担忧人工智能的发展，但我个人认为人类要理解[产生智力的机制](https://yoshuabengio.org/research/)这一关键因素才有可能生产出有共情能力的机器人，而我们离这一步还有很长的路要走。\n\n那么显然在书中人类社会已经具备了生产这类机器人的能力，并且还在不断升级，因为克拉拉并不是最新型号的那一批。而且从书的结尾也不难发现，这已经成了一条流水线，从生产到投入商店到折旧回收，已经不足为奇。还有一个很重要的点是这些机器人只会一心一意地为主人着想，百分之百利他。这一点从克拉拉宁可损失自己的机油（类似于人类献血、献器官）也要实现一个并没有证实对克拉拉的病情有帮助的可能可以看出。\n\n于是回到书中卡帕尔迪先生和乔西一家所争执的点：*人工智能机器人真的可以替代人类吗？*这其实也是作者给读者提出的一个问题，我本人的回答是不可以，译者的后记中有一句话我觉得特别好，这里摘抄出来：_正是由于自私的欲望与升华的渴望并存，人类的心中才会充满了矛盾、彷徨与痛苦；没有了自私那下坠的重力，一切崇高、向上的人性也就虚无缥缈得失去了分量。_ 而后来卡帕尔迪又去找克里西，想要对她做逆向工程来安抚社会上对人工智能表示担忧的人们，这说明卡帕尔迪自认为人工智能依然是可编程、可推导的，那这和他所说的人工智能可以替代人类是不是矛盾了呢？是不是说明卡帕尔迪内心其实也不觉得可以用一个机器人代替人类，也许只是想赚钱罢了。\n\n## 什么是太阳\n\n回到这本书上，我是在一个沐浴着午后的阳光的图书馆里读完的这本书，同时身边可能还充斥着很多新冠阳性病人，那么这本书里的太阳是什么呢？\n\n天真的克拉拉（人工智能机器人）相信太阳有神奇的力量，可以治愈疾病，而实际上乔西也确实在沐浴阳光后渐渐好转，这奠定了这是一本童话的基础，因为众所周知太阳并不能治愈疾病。然而对于克拉拉来说，\n太阳可以为其提供能量，所以对她来说太阳就是她心中的上帝，类似于人类社会中基督教的上帝，或者佛教的如来等。所以当我们去寺庙或者在胸口画十字架的时候，我们是否也很天真呢？\n\n当然，除了物理意义上的太阳，还有一个很重要的点，那就是*爱*， 不管是克拉拉之于乔西，抑或里克之于乔西，克里西之于乔西，都是*爱*，一种如暖阳般温暖我们却又看不见摸不着的东西。\n\n正是因为这些爱，才有了最后完美的结局。这让我想起了诺兰的《星际穿越》，一部完美地诠释了什么叫做“*爱*可以穿越时空”的电影。\n\n## 关于结局\n\n我是一个喜欢好的结局但又不希望好的作品就此陷入窠臼的人，这不是出于自认为能看透一切的自负或是受“喜剧的内核是悲剧”之类言论的影响。因为我始终认为好的作品，书或者电影，是需要留给读者和观众一定的想象空间的，类似于“留白”。\n\n而这个结局，的确让我想到了很多，并不局限于本书。首先是参考石黑一雄的女儿所说，这不是一本可以给孩子看的童话，它太黑暗了，于是我想到了一个大四的时候玩的游戏：《Fran Bow》，也是一个不管从画面还是故事上都十分黑暗的一款游戏，玩家们对这游戏的结局的解读也是各色各样，有人觉得整个过程都是 Fran 幻想出来的，有人觉得最后 Fran 确实去到了一个理想的世界，但就如游戏最后那句话：\n\n> _\"I still don't know many things...\"_\n\n> _\"But one thing I do know...\"_\n\n> _\"That between guilt and fear...\"_\n\n> _\"I choose happiness...\"_\n\n是的，你可以选择一个开心的结局，这没有对错。\n\n所以我也更愿意相信克拉拉陪着乔西度过了童年，圆满完成了自己的使命，在自己的最后时刻幸福地回想着曾经的点点滴滴，这不也是我们作为人类所希望的吗？","src/content/posts/clara-and-the-sun.md","48f4e7b1b675d7e2",{"html":22,"metadata":23},"\u003Ch2 id=\"写在之前的话\">写在之前的话\u003C/h2>\n\u003Cp>很久没写过读后感了，上次写应该还是在高中，从小学到高中读过很多书和期刊，也正是这些书塑造了我的一部分人格，所以我必须感谢这些书，以及给予我阅读条件的爸妈、外婆、老师。\u003C/p>\n\u003Cp>关于《克拉拉与太阳》这本书，从买回来到读完，花了快一年，深圳买来，上海读完，期间也换了工作，经历了似乎发生了很多事又似乎什么都没发生的 2022 年。\u003C/p>\n\u003Cp>至于我为什么花了一年才读完，相信现代人很能理解，因为手机和电脑已经占据了我们的工作与生活，重新拿起纸质书本就不容易。但仔细一想，其实每天读一些也能很快读完，说到底还是自己懒，但毕竟这是这几年第一本完整读完的纸质书，值得纪念一下。\u003C/p>\n\u003Ch2 id=\"什么是克拉拉\">什么是克拉拉\u003C/h2>\n\u003Cp>克拉拉是一个专为陪伴儿童而设计的太阳能人工智能机器人，具有极高的观察、推理与共情能力。在石黑一雄的采访中，他有提到很关注甚至担忧人工智能的发展，但我个人认为人类要理解\u003Ca href=\"https://yoshuabengio.org/research/\">产生智力的机制\u003C/a>这一关键因素才有可能生产出有共情能力的机器人，而我们离这一步还有很长的路要走。\u003C/p>\n\u003Cp>那么显然在书中人类社会已经具备了生产这类机器人的能力，并且还在不断升级，因为克拉拉并不是最新型号的那一批。而且从书的结尾也不难发现，这已经成了一条流水线，从生产到投入商店到折旧回收，已经不足为奇。还有一个很重要的点是这些机器人只会一心一意地为主人着想，百分之百利他。这一点从克拉拉宁可损失自己的机油（类似于人类献血、献器官）也要实现一个并没有证实对克拉拉的病情有帮助的可能可以看出。\u003C/p>\n\u003Cp>于是回到书中卡帕尔迪先生和乔西一家所争执的点：*人工智能机器人真的可以替代人类吗？*这其实也是作者给读者提出的一个问题，我本人的回答是不可以，译者的后记中有一句话我觉得特别好，这里摘抄出来：\u003Cem>正是由于自私的欲望与升华的渴望并存，人类的心中才会充满了矛盾、彷徨与痛苦；没有了自私那下坠的重力，一切崇高、向上的人性也就虚无缥缈得失去了分量。\u003C/em> 而后来卡帕尔迪又去找克里西，想要对她做逆向工程来安抚社会上对人工智能表示担忧的人们，这说明卡帕尔迪自认为人工智能依然是可编程、可推导的，那这和他所说的人工智能可以替代人类是不是矛盾了呢？是不是说明卡帕尔迪内心其实也不觉得可以用一个机器人代替人类，也许只是想赚钱罢了。\u003C/p>\n\u003Ch2 id=\"什么是太阳\">什么是太阳\u003C/h2>\n\u003Cp>回到这本书上，我是在一个沐浴着午后的阳光的图书馆里读完的这本书，同时身边可能还充斥着很多新冠阳性病人，那么这本书里的太阳是什么呢？\u003C/p>\n\u003Cp>天真的克拉拉（人工智能机器人）相信太阳有神奇的力量，可以治愈疾病，而实际上乔西也确实在沐浴阳光后渐渐好转，这奠定了这是一本童话的基础，因为众所周知太阳并不能治愈疾病。然而对于克拉拉来说，\n太阳可以为其提供能量，所以对她来说太阳就是她心中的上帝，类似于人类社会中基督教的上帝，或者佛教的如来等。所以当我们去寺庙或者在胸口画十字架的时候，我们是否也很天真呢？\u003C/p>\n\u003Cp>当然，除了物理意义上的太阳，还有一个很重要的点，那就是\u003Cem>爱\u003C/em>， 不管是克拉拉之于乔西，抑或里克之于乔西，克里西之于乔西，都是\u003Cem>爱\u003C/em>，一种如暖阳般温暖我们却又看不见摸不着的东西。\u003C/p>\n\u003Cp>正是因为这些爱，才有了最后完美的结局。这让我想起了诺兰的《星际穿越》，一部完美地诠释了什么叫做“\u003Cem>爱\u003C/em>可以穿越时空”的电影。\u003C/p>\n\u003Ch2 id=\"关于结局\">关于结局\u003C/h2>\n\u003Cp>我是一个喜欢好的结局但又不希望好的作品就此陷入窠臼的人，这不是出于自认为能看透一切的自负或是受“喜剧的内核是悲剧”之类言论的影响。因为我始终认为好的作品，书或者电影，是需要留给读者和观众一定的想象空间的，类似于“留白”。\u003C/p>\n\u003Cp>而这个结局，的确让我想到了很多，并不局限于本书。首先是参考石黑一雄的女儿所说，这不是一本可以给孩子看的童话，它太黑暗了，于是我想到了一个大四的时候玩的游戏：《Fran Bow》，也是一个不管从画面还是故事上都十分黑暗的一款游戏，玩家们对这游戏的结局的解读也是各色各样，有人觉得整个过程都是 Fran 幻想出来的，有人觉得最后 Fran 确实去到了一个理想的世界，但就如游戏最后那句话：\u003C/p>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“I still don’t know many things…”\u003C/em>\u003C/p>\n\u003C/blockquote>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“But one thing I do know…”\u003C/em>\u003C/p>\n\u003C/blockquote>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“That between guilt and fear…”\u003C/em>\u003C/p>\n\u003C/blockquote>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“I choose happiness…”\u003C/em>\u003C/p>\n\u003C/blockquote>\n\u003Cp>是的，你可以选择一个开心的结局，这没有对错。\u003C/p>\n\u003Cp>所以我也更愿意相信克拉拉陪着乔西度过了童年，圆满完成了自己的使命，在自己的最后时刻幸福地回想着曾经的点点滴滴，这不也是我们作为人类所希望的吗？\u003C/p>",{"headings":24,"imagePaths":34,"frontmatter":35},[25,28,30,32],{"depth":26,"slug":27,"text":27},2,"写在之前的话",{"depth":26,"slug":29,"text":29},"什么是克拉拉",{"depth":26,"slug":31,"text":31},"什么是太阳",{"depth":26,"slug":33,"text":33},"关于结局",[],{"title":14,"date":17,"tags":36,"summary":37,"draft":38,"author":39},[16]," ",false,"kratos","clara-and-the-sun.md","crab-and-programmer",{"id":41,"data":43,"body":48,"filePath":49,"digest":50,"rendered":51,"legacyId":58},{"title":44,"tags":45,"date":47},"程序员与螃蟹",[46],"life","2024-06-14","前几天和老婆吃小杨生煎的时候谈到现在的蟹粉生煎没啥味道了，由此联想到自己以及程序员群体。\n\n每年的三至五月是螃蟹活跃的时候，清明回家也是吃到上火，渐渐的现在超市基本看不到螃蟹的身影了，就算有也是小小的，没有让人购买的欲望。可怜螃蟹一年的高光时刻也只是这几个月，还是以付出生命为代价的。\n\n而程序员群体，在互联网行业兴起的时候，有些人为了所谓好的环境，或者光环，来到了所谓的互联网大厂，入职就一套顶配的Mac还有4k显示器，这就好像那些大型养殖场，里面的螃蟹每天都有人喂吃的，也基本不用担心天敌，蟹塘四周绿意盎然，一片欣欣向荣的样子。但是这些螃蟹被养的这么肥的结果就是上了人们的餐桌，互联网大厂员工的结果大都也是在自己最年轻能干的时候输出自己的光和热，写了一堆代码，做出了一堆产品，但最后被记住的只有老板。\n\n而有些程序员，可能自己能力也很强，但是选择自己创业。这就好比有些螃蟹自给自足，可能会遇到天敌直接被吃了，也有可能会活得很好，自身能力也很全面。\n\n但大部分人，去不了大厂，也没能力创业，去了家小公司，就像一些小的养殖场，自己都朝不保夕，又怎么指望他把你养好呢？\n\n我讲的是程序员群体，但能不能扩大到更大的群体呢？我想是能的。","src/content/posts/crab-and-programmer.md","d34f1e555f0b2a80",{"html":52,"metadata":53},"\u003Cp>前几天和老婆吃小杨生煎的时候谈到现在的蟹粉生煎没啥味道了，由此联想到自己以及程序员群体。\u003C/p>\n\u003Cp>每年的三至五月是螃蟹活跃的时候，清明回家也是吃到上火，渐渐的现在超市基本看不到螃蟹的身影了，就算有也是小小的，没有让人购买的欲望。可怜螃蟹一年的高光时刻也只是这几个月，还是以付出生命为代价的。\u003C/p>\n\u003Cp>而程序员群体，在互联网行业兴起的时候，有些人为了所谓好的环境，或者光环，来到了所谓的互联网大厂，入职就一套顶配的Mac还有4k显示器，这就好像那些大型养殖场，里面的螃蟹每天都有人喂吃的，也基本不用担心天敌，蟹塘四周绿意盎然，一片欣欣向荣的样子。但是这些螃蟹被养的这么肥的结果就是上了人们的餐桌，互联网大厂员工的结果大都也是在自己最年轻能干的时候输出自己的光和热，写了一堆代码，做出了一堆产品，但最后被记住的只有老板。\u003C/p>\n\u003Cp>而有些程序员，可能自己能力也很强，但是选择自己创业。这就好比有些螃蟹自给自足，可能会遇到天敌直接被吃了，也有可能会活得很好，自身能力也很全面。\u003C/p>\n\u003Cp>但大部分人，去不了大厂，也没能力创业，去了家小公司，就像一些小的养殖场，自己都朝不保夕，又怎么指望他把你养好呢？\u003C/p>\n\u003Cp>我讲的是程序员群体，但能不能扩大到更大的群体呢？我想是能的。\u003C/p>",{"headings":54,"imagePaths":55,"frontmatter":56},[],[],{"title":44,"date":47,"draft":38,"author":39,"tags":57},[46],"crab-and-programmer.md","fast-git-introduction",{"id":59,"data":61,"body":66,"filePath":67,"digest":68,"rendered":69,"legacyId":102},{"title":62,"tags":63,"date":65},"Git快速入门",[64],"Basic Computer Science","2023-07-21","## 基本概念\n\n大部分和Git有关的文章都在告诉你Git有哪些命令，如何使用它们可以加速你的开发进程，但很少有人探讨Git的内部原理。\n\n先考虑Git仓库的三个基本概念：Blob， Tree，Commits。\n\n### Blob\n\nBlob是二进制大对象的缩写。\n以下是ChatGPT的总结：\n\n- Blob是Git中存储文件内容的基本对象之一。\n- 每个Blob对象由文件内容和SHA-1哈希值来标识。\n- Blob对象与Git的树对象和提交对象一起构成了Git的三个基本对象类型。\n\n### Tree\n\nGit使用树对象来存储文件夹。每棵树都包含一组子树（子文件夹）或者Blob（文件）。它同样通过哈希值来标识，值得注意的是，\n任何一个子文件的修改都会导致根树的哈希值改变，可谓牵一发而动全身。\n\n### Commits\n\nCommits是由Tree和其他一些元数据组成，同样通过哈希值标识。\n\n## Git操作相关概念\n\n### Ref\n\nGit里通过一个有向无环图来指示一组Ref（空指针为起点），这些引用主要是方便人们查阅，因为哈希值太长了。比如HEAD Ref就是指向最近一次的提交。\n\n### 三个区域\n\n- Working Directory：表示当前正在使用的目录；\n- Staging Area： 也可以理解为缓存或者索引，里面暂存你的更改；\n- Repository：通过Commit Staging Area里的内容，得到Git Directory，也叫树或者数据库。\n\n### Merge与Rebase\n\n中文翻译为合并与变基，字面即可理解，下面适当展开：\n\n- Git Merge会保留原始的Commits，然后会有一个新的Commit指向HEAD，里面可能会包含一些为解决冲突而产生的新代码。\n- Git Rebase会复制原始的Commits，然后以旧的HEAD为起点继续向后添加新节点，这样可以保证这个DAG图保持一个直线。\n\n一般情况下，Rebase更加推荐使用，这样你的Commit会“脱颖而出”（\"the cream rises to the top\"），但也要注意，如果其他人\n在基于你的Commit进行开发，那么尽量不要使用Rebase。\n\n## 结语\n\n最后的最后，尽量使用Intellij开发，因为他的Local History真的可以救命，有时候`git reflog`也不一定管用。","src/content/posts/fast-git-introduction.md","06d413999b131608",{"html":70,"metadata":71},"\u003Ch2 id=\"基本概念\">基本概念\u003C/h2>\n\u003Cp>大部分和Git有关的文章都在告诉你Git有哪些命令，如何使用它们可以加速你的开发进程，但很少有人探讨Git的内部原理。\u003C/p>\n\u003Cp>先考虑Git仓库的三个基本概念：Blob， Tree，Commits。\u003C/p>\n\u003Ch3 id=\"blob\">Blob\u003C/h3>\n\u003Cp>Blob是二进制大对象的缩写。\n以下是ChatGPT的总结：\u003C/p>\n\u003Cul>\n\u003Cli>Blob是Git中存储文件内容的基本对象之一。\u003C/li>\n\u003Cli>每个Blob对象由文件内容和SHA-1哈希值来标识。\u003C/li>\n\u003Cli>Blob对象与Git的树对象和提交对象一起构成了Git的三个基本对象类型。\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"tree\">Tree\u003C/h3>\n\u003Cp>Git使用树对象来存储文件夹。每棵树都包含一组子树（子文件夹）或者Blob（文件）。它同样通过哈希值来标识，值得注意的是，\n任何一个子文件的修改都会导致根树的哈希值改变，可谓牵一发而动全身。\u003C/p>\n\u003Ch3 id=\"commits\">Commits\u003C/h3>\n\u003Cp>Commits是由Tree和其他一些元数据组成，同样通过哈希值标识。\u003C/p>\n\u003Ch2 id=\"git操作相关概念\">Git操作相关概念\u003C/h2>\n\u003Ch3 id=\"ref\">Ref\u003C/h3>\n\u003Cp>Git里通过一个有向无环图来指示一组Ref（空指针为起点），这些引用主要是方便人们查阅，因为哈希值太长了。比如HEAD Ref就是指向最近一次的提交。\u003C/p>\n\u003Ch3 id=\"三个区域\">三个区域\u003C/h3>\n\u003Cul>\n\u003Cli>Working Directory：表示当前正在使用的目录；\u003C/li>\n\u003Cli>Staging Area： 也可以理解为缓存或者索引，里面暂存你的更改；\u003C/li>\n\u003Cli>Repository：通过Commit Staging Area里的内容，得到Git Directory，也叫树或者数据库。\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"merge与rebase\">Merge与Rebase\u003C/h3>\n\u003Cp>中文翻译为合并与变基，字面即可理解，下面适当展开：\u003C/p>\n\u003Cul>\n\u003Cli>Git Merge会保留原始的Commits，然后会有一个新的Commit指向HEAD，里面可能会包含一些为解决冲突而产生的新代码。\u003C/li>\n\u003Cli>Git Rebase会复制原始的Commits，然后以旧的HEAD为起点继续向后添加新节点，这样可以保证这个DAG图保持一个直线。\u003C/li>\n\u003C/ul>\n\u003Cp>一般情况下，Rebase更加推荐使用，这样你的Commit会“脱颖而出”（“the cream rises to the top”），但也要注意，如果其他人\n在基于你的Commit进行开发，那么尽量不要使用Rebase。\u003C/p>\n\u003Ch2 id=\"结语\">结语\u003C/h2>\n\u003Cp>最后的最后，尽量使用Intellij开发，因为他的Local History真的可以救命，有时候\u003Ccode>git reflog\u003C/code>也不一定管用。\u003C/p>",{"headings":72,"imagePaths":98,"frontmatter":99},[73,75,79,82,85,88,91,93,96],{"depth":26,"slug":74,"text":74},"基本概念",{"depth":76,"slug":77,"text":78},3,"blob","Blob",{"depth":76,"slug":80,"text":81},"tree","Tree",{"depth":76,"slug":83,"text":84},"commits","Commits",{"depth":26,"slug":86,"text":87},"git操作相关概念","Git操作相关概念",{"depth":76,"slug":89,"text":90},"ref","Ref",{"depth":76,"slug":92,"text":92},"三个区域",{"depth":76,"slug":94,"text":95},"merge与rebase","Merge与Rebase",{"depth":26,"slug":97,"text":97},"结语",[],{"title":62,"date":65,"summary":100,"draft":38,"author":39,"tags":101},"A Fast Intro to Git Internals",[64],"fast-git-introduction.md","how-to-do-technical-notes",{"id":103,"data":105,"body":109,"filePath":110,"digest":111,"rendered":112,"legacyId":126},{"title":106,"tags":107,"date":108},"如何做技术笔记",[46],"2023-07-14","## 什么是技术笔记\n\n平时开发或者阅读书籍、博客的时候，很多东西看过没多久就会忘记，很多人会选择一个笔记软件，比如 Notion、Obsidian 等，把学到的记录下来，这就是技术笔记。\n\n## 为什么不要记笔记\n\n也有一些人持有不需要记笔记的观点，认为我们一辈子读的大部分书都是没意义的，或者你可以通过搜索引擎很轻松地找到需要的知识，甚至都不需要放到浏览器书签里。事实上确实很多人记完笔记就很少再看第二遍了。\n\n## 到底该不该记笔记\n\n我个人的观点是，只针对程序员，要记，但有几个原则：\n\n1. 笔记要遵循自己的思路加工总结后输出，方便在脑中按图索骥；\n\n2. 笔记不仅仅是记录知识，也可以是问题、心路历程等；\n\n3. 笔记要方便检索，这点我相信用好 Obsidian 没什么问题。","src/content/posts/how-to-do-technical-notes.md","0bb55ac6be9bf996",{"html":113,"metadata":114},"\u003Ch2 id=\"什么是技术笔记\">什么是技术笔记\u003C/h2>\n\u003Cp>平时开发或者阅读书籍、博客的时候，很多东西看过没多久就会忘记，很多人会选择一个笔记软件，比如 Notion、Obsidian 等，把学到的记录下来，这就是技术笔记。\u003C/p>\n\u003Ch2 id=\"为什么不要记笔记\">为什么不要记笔记\u003C/h2>\n\u003Cp>也有一些人持有不需要记笔记的观点，认为我们一辈子读的大部分书都是没意义的，或者你可以通过搜索引擎很轻松地找到需要的知识，甚至都不需要放到浏览器书签里。事实上确实很多人记完笔记就很少再看第二遍了。\u003C/p>\n\u003Ch2 id=\"到底该不该记笔记\">到底该不该记笔记\u003C/h2>\n\u003Cp>我个人的观点是，只针对程序员，要记，但有几个原则：\u003C/p>\n\u003Col>\n\u003Cli>\n\u003Cp>笔记要遵循自己的思路加工总结后输出，方便在脑中按图索骥；\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>笔记不仅仅是记录知识，也可以是问题、心路历程等；\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>笔记要方便检索，这点我相信用好 Obsidian 没什么问题。\u003C/p>\n\u003C/li>\n\u003C/ol>",{"headings":115,"imagePaths":122,"frontmatter":123},[116,118,120],{"depth":26,"slug":117,"text":117},"什么是技术笔记",{"depth":26,"slug":119,"text":119},"为什么不要记笔记",{"depth":26,"slug":121,"text":121},"到底该不该记笔记",[],{"title":106,"date":108,"tags":124,"summary":125,"draft":38,"author":39},[46],"","how-to-do-technical-notes.md","league-of-legends-s12",{"id":127,"data":129,"body":133,"filePath":134,"digest":135,"rendered":136,"legacyId":150},{"title":130,"tags":131,"date":132},"DRX夺冠有感",[46],"2022-11-07","# S12\n\n关于最后总决赛，我不知道为什么大部分人都希望 SKT 夺冠，希望 Faker 重回巅峰，偏偏我希望 DRX 夺冠，因为我昨天看比赛时候的心情和 2017 年 S7 一样, 就像我在第一篇博客里讲的：\n\n> _\"所以我觉得我的 2017 年过的并不失败，大概我心中住了一个 Ambition 吧.\"_\n\n## Deft\n\n他和 Faker 同为麻浦高中的学生，同一年打职业，却在十年里辗转了七支队伍，未曾夺得一冠。\n\nDeft 曾经也在 EDG 打过，正好那天的解说席上明凯也在，不知道同为追梦人，也同是队友，他心里是什么想法。\n\n或许他已经释然了，一辈子拿不到冠军其实才是常态，至少努力过就没什么遗憾了。\n\n赛后采访时 Deft 的一段话我觉得值得记录下来：\n\n> _\"我唯一擅长的只有英雄联盟，如果我不能在我最擅长的事情上取得成功，那我根本不知道我的人生还有什么意义。\"_","src/content/posts/league-of-legends-s12.md","d2902369b8d00905",{"html":137,"metadata":138},"\u003Ch1 id=\"s12\">S12\u003C/h1>\n\u003Cp>关于最后总决赛，我不知道为什么大部分人都希望 SKT 夺冠，希望 Faker 重回巅峰，偏偏我希望 DRX 夺冠，因为我昨天看比赛时候的心情和 2017 年 S7 一样, 就像我在第一篇博客里讲的：\u003C/p>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“所以我觉得我的 2017 年过的并不失败，大概我心中住了一个 Ambition 吧.”\u003C/em>\u003C/p>\n\u003C/blockquote>\n\u003Ch2 id=\"deft\">Deft\u003C/h2>\n\u003Cp>他和 Faker 同为麻浦高中的学生，同一年打职业，却在十年里辗转了七支队伍，未曾夺得一冠。\u003C/p>\n\u003Cp>Deft 曾经也在 EDG 打过，正好那天的解说席上明凯也在，不知道同为追梦人，也同是队友，他心里是什么想法。\u003C/p>\n\u003Cp>或许他已经释然了，一辈子拿不到冠军其实才是常态，至少努力过就没什么遗憾了。\u003C/p>\n\u003Cp>赛后采访时 Deft 的一段话我觉得值得记录下来：\u003C/p>\n\u003Cblockquote>\n\u003Cp>\u003Cem>“我唯一擅长的只有英雄联盟，如果我不能在我最擅长的事情上取得成功，那我根本不知道我的人生还有什么意义。”\u003C/em>\u003C/p>\n\u003C/blockquote>",{"headings":139,"imagePaths":147,"frontmatter":148},[140,144],{"depth":141,"slug":142,"text":143},1,"s12","S12",{"depth":26,"slug":145,"text":146},"deft","Deft",[],{"title":130,"date":132,"tags":149,"summary":37,"draft":38,"author":39},[46],"league-of-legends-s12.md","movie-record-2022",{"id":151,"data":153,"body":159,"filePath":160,"digest":161,"rendered":162,"legacyId":175},{"title":154,"tags":155,"date":158},"2022年观影记录",[156,157],"movie","series","2023-01-07","# 2022 年看过的电影\n\n- 康斯坦丁\n  - _这部电影让我真正戒了烟。_\n- 未来战警\n- 不\n  - _乔丹·皮尔经典的种族议题外加对好莱坞日薄西山的叹息。_\n- 鹰眼\n- 心灵传输者\n  - _小时候就会做梦梦到的超能力，不用坐飞机就可以全世界旅行可太美好了。_\n- 悲情三角\n  - _当一个女性掌握权力后，她也开始颐指气使，霸占帅气的男性。人类身处某个位置时，自然会做出一些出于本能的行为，这与性别无关，这是人类的可悲。_\n- 上帝的笔误\n  - _我假装自己是精神病人去了一家精神病院，实际目的是查案，但我最后却要努力证明自己没有精神病。而影片的最后十秒告诉我，我就是有精神病。_\n- 阿凡达：水之道\n  - _殖民国家还是那么喜欢忏悔。没办法，观众爱看。_\n- 年鉴计划\n- 天才计划\n  - _经典种族议题。哈利·波特也老了。_\n- 利刃出鞘 2\n  - _难得的能超越第一部的电影。_\n- 冥界警局\n- 福尔摩斯小姐： 伦敦厄运\n- 分手的决心\n  - _朴赞郁的镜头语言可以说是如诗般唯美。汤唯将那种压抑的爱表现地淋漓尽致。“摧毁一个男人的最佳方式就是成为他的一部分，然后消失在这个世界上。”_\n- 我记得\n  - _南韩复仇片流水线合格产品。_\n- 黑亚当\n- 共助 2：国际\n- 三千年的渴望\n  - _三千年的等待其实是女人的等待。但很抱歉无法共情。_\n- 黑洞频率\n  - _二十年前的科幻片，其中父子亲情让人感动。_\n- 天方异谈\n  - _国产科幻片，第三个故事细思极恐。_\n- 一个小忙\n  - _一个看上去人畜无害、热心、总受欺负的女人，一个凭一己之力闯出自己的事业并且能下手杀了自己亲妹妹的女人，前者却更狠。男人在片中沦为玩物。_\n- 暗夜狼人\n- 狩猎\n  - _李政宰转型导演的处女作，意外中的好看。顺便感叹下全斗焕时期可真是韩国电影取之不尽的故事来源。_\n- 子弹列车\n  - _大牌云集的喜剧动作片，顺便一提，这部电影的导演曾经是主演布拉德皮特的替身。另外《Five Hundred Miles》真好听。_\n- 壮志凌云 2： 独行侠\n  - _美利坚征兵宣传片，但是真的看得我热血沸腾。汤姆·克鲁斯依旧那么帅。_\n- 雷神 4： 爱与雷霆\n  - _看得出来漫威第四阶段只想摆烂了，不过确实起到了承前启后的作用，片中引出的创世神明“永恒”还有“生命法庭”等角色期待在第五阶段给予更大篇幅。_\n- 坠落\n  - _《活埋》是在地下，《坠落》是在电视塔顶，都是演员少但效果好的电影。_\n- 神探大战\n  - _韦家辉老了，刘青云也老了。_\n- 日班猎人\n- 明日战记\n- 幕后玩家\n- 铁血战士：猎物\n  - _谁才是猎人，谁才是猎物？_\n- 灰影人\n- 犯罪都市 2\n- 魔女 2\n- 大空头\n  - _需要一定金融基础，不过看得很过瘾。_\n- 奇异博士 2： 疯狂多元宇宙\n  - _导演拍过美版《咒怨》，恐怖元素不少。_\n- 蜘蛛头\n- 侏罗纪世界 3\n- 目中无人\n  - _期待第二部，武侠是属于中国的，好的武侠电影也会回来的。_\n- 瞬息全宇宙\n  - _杨紫琼有望拿奥斯卡影后了。另外，不知道那些湾区华裔双码农父母的子女靠被打鸡血长大后看到这部电影作何感想？还是根本就不让看？_\n- 刺猬索尼克 2\n  - _第一部第二部都是是和墨墨一起看的，怀念 4399 小游戏还有金·凯瑞哈哈。_\n- 恶霸警察\n  - _压抑、压抑_\n- 神秘海域\n- 承包商\n- 套装\n  - _小小裁缝店，上演了一出又一出好戏。_\n- 月球陨落\n- 蜘蛛侠：英雄无归\n- 亚当计划\n- 尼罗河上的惨案\n  - _冲着肯尼斯·布拉纳和盖尔·加朵才去电影院贡献票房的，实际拍得确实一般。_\n- 王牌特工：源起\n  - _不如前几部。_\n- 误杀 2\n  - _不如第一部。_\n- 古董局中局\n- 永恒族\n  - _天神族审判者阿里瑟姆出场时确实震撼。_\n\n# 2022 年看过的电视剧\n\n- 完美伴侣\n  - _相对真实。_\n- 边缘世界 第一季\n  - _《三体》真应该和它学学什么叫做科幻电影的质感，而这部剧甚至都不如《最后生还者》的第三集。_\n- 塔尔萨之王 第一季\n  - _“大学学历的意义在于告诉用人单位，你能够连续四年坚持不懈的按时完成一系列任务，如果雇佣了你，你会每天准时来上班，不会搞砸他的生意。”_\n- 吉尔莫·德尔·托罗的奇思妙想\n  - _我至今都害怕醒来时看到床头站着一个小男孩盯着我。_\n- 伦敦黑帮 第一季、第二季\n- 小小姐们\n  - _高开低走，依然落入韩国控诉财阀类题材流水线电影的窠臼。_\n- 苏里南\n  - _韩版《毒枭》。_\n- 超蓬勃：优步之战 第一季\n  - _\"Are you an asshole?\" \"Yes.\" \"You are hired.\" 感叹 Travis 的魄力和 Anthony Levandowski 的天才。_\n- 爱，死亡和机器人 第一季、第二季、第三季\n  - _科幻动画的天花板。人只有两个笔画，却比一切事物都复杂。_\n- 开端","src/content/posts/movie-record-2022.md","336a9847501e00f3",{"html":163,"metadata":164},"\u003Ch1 id=\"2022-年看过的电影\">2022 年看过的电影\u003C/h1>\n\u003Cul>\n\u003Cli>康斯坦丁\n\u003Cul>\n\u003Cli>\u003Cem>这部电影让我真正戒了烟。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>未来战警\u003C/li>\n\u003Cli>不\n\u003Cul>\n\u003Cli>\u003Cem>乔丹·皮尔经典的种族议题外加对好莱坞日薄西山的叹息。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>鹰眼\u003C/li>\n\u003Cli>心灵传输者\n\u003Cul>\n\u003Cli>\u003Cem>小时候就会做梦梦到的超能力，不用坐飞机就可以全世界旅行可太美好了。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>悲情三角\n\u003Cul>\n\u003Cli>\u003Cem>当一个女性掌握权力后，她也开始颐指气使，霸占帅气的男性。人类身处某个位置时，自然会做出一些出于本能的行为，这与性别无关，这是人类的可悲。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>上帝的笔误\n\u003Cul>\n\u003Cli>\u003Cem>我假装自己是精神病人去了一家精神病院，实际目的是查案，但我最后却要努力证明自己没有精神病。而影片的最后十秒告诉我，我就是有精神病。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>阿凡达：水之道\n\u003Cul>\n\u003Cli>\u003Cem>殖民国家还是那么喜欢忏悔。没办法，观众爱看。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>年鉴计划\u003C/li>\n\u003Cli>天才计划\n\u003Cul>\n\u003Cli>\u003Cem>经典种族议题。哈利·波特也老了。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>利刃出鞘 2\n\u003Cul>\n\u003Cli>\u003Cem>难得的能超越第一部的电影。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>冥界警局\u003C/li>\n\u003Cli>福尔摩斯小姐： 伦敦厄运\u003C/li>\n\u003Cli>分手的决心\n\u003Cul>\n\u003Cli>\u003Cem>朴赞郁的镜头语言可以说是如诗般唯美。汤唯将那种压抑的爱表现地淋漓尽致。“摧毁一个男人的最佳方式就是成为他的一部分，然后消失在这个世界上。”\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>我记得\n\u003Cul>\n\u003Cli>\u003Cem>南韩复仇片流水线合格产品。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>黑亚当\u003C/li>\n\u003Cli>共助 2：国际\u003C/li>\n\u003Cli>三千年的渴望\n\u003Cul>\n\u003Cli>\u003Cem>三千年的等待其实是女人的等待。但很抱歉无法共情。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>黑洞频率\n\u003Cul>\n\u003Cli>\u003Cem>二十年前的科幻片，其中父子亲情让人感动。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>天方异谈\n\u003Cul>\n\u003Cli>\u003Cem>国产科幻片，第三个故事细思极恐。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>一个小忙\n\u003Cul>\n\u003Cli>\u003Cem>一个看上去人畜无害、热心、总受欺负的女人，一个凭一己之力闯出自己的事业并且能下手杀了自己亲妹妹的女人，前者却更狠。男人在片中沦为玩物。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>暗夜狼人\u003C/li>\n\u003Cli>狩猎\n\u003Cul>\n\u003Cli>\u003Cem>李政宰转型导演的处女作，意外中的好看。顺便感叹下全斗焕时期可真是韩国电影取之不尽的故事来源。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>子弹列车\n\u003Cul>\n\u003Cli>\u003Cem>大牌云集的喜剧动作片，顺便一提，这部电影的导演曾经是主演布拉德皮特的替身。另外《Five Hundred Miles》真好听。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>壮志凌云 2： 独行侠\n\u003Cul>\n\u003Cli>\u003Cem>美利坚征兵宣传片，但是真的看得我热血沸腾。汤姆·克鲁斯依旧那么帅。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>雷神 4： 爱与雷霆\n\u003Cul>\n\u003Cli>\u003Cem>看得出来漫威第四阶段只想摆烂了，不过确实起到了承前启后的作用，片中引出的创世神明“永恒”还有“生命法庭”等角色期待在第五阶段给予更大篇幅。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>坠落\n\u003Cul>\n\u003Cli>\u003Cem>《活埋》是在地下，《坠落》是在电视塔顶，都是演员少但效果好的电影。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>神探大战\n\u003Cul>\n\u003Cli>\u003Cem>韦家辉老了，刘青云也老了。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>日班猎人\u003C/li>\n\u003Cli>明日战记\u003C/li>\n\u003Cli>幕后玩家\u003C/li>\n\u003Cli>铁血战士：猎物\n\u003Cul>\n\u003Cli>\u003Cem>谁才是猎人，谁才是猎物？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>灰影人\u003C/li>\n\u003Cli>犯罪都市 2\u003C/li>\n\u003Cli>魔女 2\u003C/li>\n\u003Cli>大空头\n\u003Cul>\n\u003Cli>\u003Cem>需要一定金融基础，不过看得很过瘾。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>奇异博士 2： 疯狂多元宇宙\n\u003Cul>\n\u003Cli>\u003Cem>导演拍过美版《咒怨》，恐怖元素不少。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>蜘蛛头\u003C/li>\n\u003Cli>侏罗纪世界 3\u003C/li>\n\u003Cli>目中无人\n\u003Cul>\n\u003Cli>\u003Cem>期待第二部，武侠是属于中国的，好的武侠电影也会回来的。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>瞬息全宇宙\n\u003Cul>\n\u003Cli>\u003Cem>杨紫琼有望拿奥斯卡影后了。另外，不知道那些湾区华裔双码农父母的子女靠被打鸡血长大后看到这部电影作何感想？还是根本就不让看？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>刺猬索尼克 2\n\u003Cul>\n\u003Cli>\u003Cem>第一部第二部都是是和墨墨一起看的，怀念 4399 小游戏还有金·凯瑞哈哈。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>恶霸警察\n\u003Cul>\n\u003Cli>\u003Cem>压抑、压抑\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>神秘海域\u003C/li>\n\u003Cli>承包商\u003C/li>\n\u003Cli>套装\n\u003Cul>\n\u003Cli>\u003Cem>小小裁缝店，上演了一出又一出好戏。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>月球陨落\u003C/li>\n\u003Cli>蜘蛛侠：英雄无归\u003C/li>\n\u003Cli>亚当计划\u003C/li>\n\u003Cli>尼罗河上的惨案\n\u003Cul>\n\u003Cli>\u003Cem>冲着肯尼斯·布拉纳和盖尔·加朵才去电影院贡献票房的，实际拍得确实一般。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>王牌特工：源起\n\u003Cul>\n\u003Cli>\u003Cem>不如前几部。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>误杀 2\n\u003Cul>\n\u003Cli>\u003Cem>不如第一部。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>古董局中局\u003C/li>\n\u003Cli>永恒族\n\u003Cul>\n\u003Cli>\u003Cem>天神族审判者阿里瑟姆出场时确实震撼。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"2022-年看过的电视剧\">2022 年看过的电视剧\u003C/h1>\n\u003Cul>\n\u003Cli>完美伴侣\n\u003Cul>\n\u003Cli>\u003Cem>相对真实。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>边缘世界 第一季\n\u003Cul>\n\u003Cli>\u003Cem>《三体》真应该和它学学什么叫做科幻电影的质感，而这部剧甚至都不如《最后生还者》的第三集。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>塔尔萨之王 第一季\n\u003Cul>\n\u003Cli>\u003Cem>“大学学历的意义在于告诉用人单位，你能够连续四年坚持不懈的按时完成一系列任务，如果雇佣了你，你会每天准时来上班，不会搞砸他的生意。”\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>吉尔莫·德尔·托罗的奇思妙想\n\u003Cul>\n\u003Cli>\u003Cem>我至今都害怕醒来时看到床头站着一个小男孩盯着我。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>伦敦黑帮 第一季、第二季\u003C/li>\n\u003Cli>小小姐们\n\u003Cul>\n\u003Cli>\u003Cem>高开低走，依然落入韩国控诉财阀类题材流水线电影的窠臼。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>苏里南\n\u003Cul>\n\u003Cli>\u003Cem>韩版《毒枭》。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>超蓬勃：优步之战 第一季\n\u003Cul>\n\u003Cli>\u003Cem>“Are you an asshole?” “Yes.” “You are hired.” 感叹 Travis 的魄力和 Anthony Levandowski 的天才。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>爱，死亡和机器人 第一季、第二季、第三季\n\u003Cul>\n\u003Cli>\u003Cem>科幻动画的天花板。人只有两个笔画，却比一切事物都复杂。\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>开端\u003C/li>\n\u003C/ul>",{"headings":165,"imagePaths":172,"frontmatter":173},[166,169],{"depth":141,"slug":167,"text":168},"2022-年看过的电影","2022 年看过的电影",{"depth":141,"slug":170,"text":171},"2022-年看过的电视剧","2022 年看过的电视剧",[],{"title":154,"date":158,"tags":174,"summary":37,"draft":38,"author":39},[156,157],"movie-record-2022.md","movie-record-2023",{"id":176,"data":178,"body":182,"filePath":183,"digest":184,"rendered":185,"legacyId":198},{"title":179,"tags":180,"date":181},"2023年观影记录",[156,157],"2024-05-03","# 2023 年看过的电影\n\n- 无间道三部曲\n  - _谁都不能信_\n- 三方国界\n  - _哪个国家的退伍军人过的快乐？_\n- 猎头游戏\n  - _男主能藏粪坑也是个狠人_\n- 狗神\n  - _影院看的，直到字幕完全结束才有人离场，这是我见过的第一次_\n- 军舰岛\n  - _内部不够团结成为了抗日的很大阻力，这部韩国电影很深刻地指出了这一点，我们的抗日电影呢？_\n- 坚如磐石\n- 93国际列车大劫案：莫斯科行动\n- 涉过愤怒的海\n  - _每一位家长都该看看_\n- 第八个嫌疑人\n  - _致敬每一位兢兢业业的人民警察_\n- 杀手\n  - _Stick to your plan, trust no one_\n  - _Stick to the plan, forbid empathy_\n  - _Stick to the plan, anticipate, don't improvise_\n  - _Stick to your plan, never yield advantage_\n  - _Stick to the plan, fight only the battle you're paid to fight, ask yourself, what's in it for me?_\n  - _Stick to the plan, empathy is weakness, weakness is vulnerability_\n  - _This is what it takes if you want to succeeed_\n  - _Simple._\n- 河边的错误\n  - _究竟是时代的错误还是人的错误？_\n- 伸冤人3\n  - _丹泽尔·华盛顿老了，西西里岛养老了_\n- 威尼斯惊魂夜\n  - _不如前两部_\n- 窗台上的男人\n- 奥本海默\n  - _物理与政治_\n- 控方证人\n  - _男人想要的太多，女人想要的只有爱情_\n- 谍之心\n  - _浪费时间的电影_\n- 孤注一掷\n  - _该被骗的人还是会被骗_\n- 剑鱼行动\n- 变脸\n  - _和《剑鱼行动》一样，只能感叹凯奇叔和特拉沃尔塔都老了_\n- 巨齿鲨2\n- 搏击俱乐部\n  - _把我心里想的都拍出来了_\n- 守法公民\n- 惊天营救2\n- 少数派报告\n  - _当人们用一个系统控制另一个系统时，如何保证系统本身的稳定性？_\n- 锅匠，裁缝，士兵，间谍\n  - _第一遍真没看懂，复杂的人物关系似乎也揭示了冷战时代比全面战争更为恐怖_\n- 永生战士\n  - _搜了下真的有个芬兰战神_\n- 猫鼠游戏\n  - _真事改编，我们可以吗？_\n- 催眠\n- 心迷宫\n  - _人性本恶_\n- 疾速追杀4\n  - _看前几部的时候我一直想知道“高桌”究竟是怎样一群人，现在我知道了，“规则”即“高桌”_\n- 速度与激情10\n- 盟约\n  - _战争中建立的信任弥足珍贵_\n- 逃离德黑兰\n- 银河护卫队3\n- 龙与地下城：侠盗荣耀\n- 灌篮高手\n- 红雀\n- 大而不倒\n  - _几百年的资本积累，怎么倒？_\n- 无名\n- 杀死福顺\n- 网络迷踪2\n  - _拍摄手法确实新颖，这就给我的google账号来个双重认证_\n- 虽然只是弄丢了手机\n  - _剧情挺老套的，但是电影里人人都在低头看手机的场景却很瘆人_\n\n# 2023 年看过的电视剧\n\n- 万神殿\n  - _对人工智能乃至整个宇宙的探讨，相当深刻_\n- 拾荒者统治\n  - _想象力的巅峰，人类的渺小_\n- 洛基-第二季\n  - _近年漫威难得的好剧_\n- 尸体\n  - _穿越时空的调查_\n- 劫机7小时\n  - _练好口才走遍天下都不怕_\n- 秘密入侵\n- 黑暗荣耀\n  - _为什么每部韩剧都是虎头蛇尾，最后来个爽文结局？？_\n- 硅谷\n  - _创业艰辛，老实打工_","src/content/posts/movie-record-2023.md","1088fd5196fd8517",{"html":186,"metadata":187},"\u003Ch1 id=\"2023-年看过的电影\">2023 年看过的电影\u003C/h1>\n\u003Cul>\n\u003Cli>无间道三部曲\n\u003Cul>\n\u003Cli>\u003Cem>谁都不能信\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>三方国界\n\u003Cul>\n\u003Cli>\u003Cem>哪个国家的退伍军人过的快乐？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>猎头游戏\n\u003Cul>\n\u003Cli>\u003Cem>男主能藏粪坑也是个狠人\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>狗神\n\u003Cul>\n\u003Cli>\u003Cem>影院看的，直到字幕完全结束才有人离场，这是我见过的第一次\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>军舰岛\n\u003Cul>\n\u003Cli>\u003Cem>内部不够团结成为了抗日的很大阻力，这部韩国电影很深刻地指出了这一点，我们的抗日电影呢？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>坚如磐石\u003C/li>\n\u003Cli>93国际列车大劫案：莫斯科行动\u003C/li>\n\u003Cli>涉过愤怒的海\n\u003Cul>\n\u003Cli>\u003Cem>每一位家长都该看看\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>第八个嫌疑人\n\u003Cul>\n\u003Cli>\u003Cem>致敬每一位兢兢业业的人民警察\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>杀手\n\u003Cul>\n\u003Cli>\u003Cem>Stick to your plan, trust no one\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Stick to the plan, forbid empathy\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Stick to the plan, anticipate, don’t improvise\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Stick to your plan, never yield advantage\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Stick to the plan, fight only the battle you’re paid to fight, ask yourself, what’s in it for me?\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Stick to the plan, empathy is weakness, weakness is vulnerability\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>This is what it takes if you want to succeeed\u003C/em>\u003C/li>\n\u003Cli>\u003Cem>Simple.\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>河边的错误\n\u003Cul>\n\u003Cli>\u003Cem>究竟是时代的错误还是人的错误？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>伸冤人3\n\u003Cul>\n\u003Cli>\u003Cem>丹泽尔·华盛顿老了，西西里岛养老了\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>威尼斯惊魂夜\n\u003Cul>\n\u003Cli>\u003Cem>不如前两部\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>窗台上的男人\u003C/li>\n\u003Cli>奥本海默\n\u003Cul>\n\u003Cli>\u003Cem>物理与政治\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>控方证人\n\u003Cul>\n\u003Cli>\u003Cem>男人想要的太多，女人想要的只有爱情\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>谍之心\n\u003Cul>\n\u003Cli>\u003Cem>浪费时间的电影\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>孤注一掷\n\u003Cul>\n\u003Cli>\u003Cem>该被骗的人还是会被骗\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>剑鱼行动\u003C/li>\n\u003Cli>变脸\n\u003Cul>\n\u003Cli>\u003Cem>和《剑鱼行动》一样，只能感叹凯奇叔和特拉沃尔塔都老了\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>巨齿鲨2\u003C/li>\n\u003Cli>搏击俱乐部\n\u003Cul>\n\u003Cli>\u003Cem>把我心里想的都拍出来了\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>守法公民\u003C/li>\n\u003Cli>惊天营救2\u003C/li>\n\u003Cli>少数派报告\n\u003Cul>\n\u003Cli>\u003Cem>当人们用一个系统控制另一个系统时，如何保证系统本身的稳定性？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>锅匠，裁缝，士兵，间谍\n\u003Cul>\n\u003Cli>\u003Cem>第一遍真没看懂，复杂的人物关系似乎也揭示了冷战时代比全面战争更为恐怖\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>永生战士\n\u003Cul>\n\u003Cli>\u003Cem>搜了下真的有个芬兰战神\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>猫鼠游戏\n\u003Cul>\n\u003Cli>\u003Cem>真事改编，我们可以吗？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>催眠\u003C/li>\n\u003Cli>心迷宫\n\u003Cul>\n\u003Cli>\u003Cem>人性本恶\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>疾速追杀4\n\u003Cul>\n\u003Cli>\u003Cem>看前几部的时候我一直想知道“高桌”究竟是怎样一群人，现在我知道了，“规则”即“高桌”\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>速度与激情10\u003C/li>\n\u003Cli>盟约\n\u003Cul>\n\u003Cli>\u003Cem>战争中建立的信任弥足珍贵\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>逃离德黑兰\u003C/li>\n\u003Cli>银河护卫队3\u003C/li>\n\u003Cli>龙与地下城：侠盗荣耀\u003C/li>\n\u003Cli>灌篮高手\u003C/li>\n\u003Cli>红雀\u003C/li>\n\u003Cli>大而不倒\n\u003Cul>\n\u003Cli>\u003Cem>几百年的资本积累，怎么倒？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>无名\u003C/li>\n\u003Cli>杀死福顺\u003C/li>\n\u003Cli>网络迷踪2\n\u003Cul>\n\u003Cli>\u003Cem>拍摄手法确实新颖，这就给我的google账号来个双重认证\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>虽然只是弄丢了手机\n\u003Cul>\n\u003Cli>\u003Cem>剧情挺老套的，但是电影里人人都在低头看手机的场景却很瘆人\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch1 id=\"2023-年看过的电视剧\">2023 年看过的电视剧\u003C/h1>\n\u003Cul>\n\u003Cli>万神殿\n\u003Cul>\n\u003Cli>\u003Cem>对人工智能乃至整个宇宙的探讨，相当深刻\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>拾荒者统治\n\u003Cul>\n\u003Cli>\u003Cem>想象力的巅峰，人类的渺小\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>洛基-第二季\n\u003Cul>\n\u003Cli>\u003Cem>近年漫威难得的好剧\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>尸体\n\u003Cul>\n\u003Cli>\u003Cem>穿越时空的调查\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>劫机7小时\n\u003Cul>\n\u003Cli>\u003Cem>练好口才走遍天下都不怕\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>秘密入侵\u003C/li>\n\u003Cli>黑暗荣耀\n\u003Cul>\n\u003Cli>\u003Cem>为什么每部韩剧都是虎头蛇尾，最后来个爽文结局？？\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>硅谷\n\u003Cul>\n\u003Cli>\u003Cem>创业艰辛，老实打工\u003C/em>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>",{"headings":188,"imagePaths":195,"frontmatter":196},[189,192],{"depth":141,"slug":190,"text":191},"2023-年看过的电影","2023 年看过的电影",{"depth":141,"slug":193,"text":194},"2023-年看过的电视剧","2023 年看过的电视剧",[],{"title":179,"date":181,"tags":197,"summary":37,"author":39},[156,157],"movie-record-2023.md","the-push",{"id":199,"data":201,"body":205,"filePath":206,"digest":207,"rendered":208,"legacyId":223},{"title":202,"tags":203,"date":204},"\u003C我本不该成为母亲>读后感",[16],"2023-10-15","## 关于书名\n\n这本书英文叫做《The Push》， 译者将其翻译为《我本不该成为母亲》我认为略有偏颇，最然这句话出自文章本身，但不如英文原名深刻且简洁。同时，\"The Push\"\n其实也是全书的一个核心悬疑部分--究竟是不是书中的小女孩，维奥莱特，亲手把她的亲弟弟的婴儿车推向路中央从而酿成惨剧？\n\n## 母亲的身份\n\n当一个女性还在她母亲的子宫里时，她自己的子宫里也已经有了卵子，也就是说，母亲和女儿在同一个子宫中被孕育。此书用这句话作为扉页，其实也挑明了一个问题--\n女性获得母亲这一身份并非自愿。不是所有女孩都必须通过成为母亲，才能使她们的生命完备。将女性的价值捆绑在母亲的身份之上，是对女性自身意义的亵渎和屠杀。\n\n## 婚姻\n\n书里几乎提到了一切婚姻中会遇到的事，初恋时的甜蜜，婚后的琐碎，以及丈夫的外遇，让人不禁感叹：“Such is Life.”\n\n## 败笔\n\n其实不是很理解为什么要写那个反社会人格的孩子，正如一个豆瓣说的，婚姻本身就已足够残忍，而这个孩子的性格的产生也似乎无法溯源，比较突兀。","src/content/posts/the-push.md","29a184686df45bf1",{"html":209,"metadata":210},"\u003Ch2 id=\"关于书名\">关于书名\u003C/h2>\n\u003Cp>这本书英文叫做《The Push》， 译者将其翻译为《我本不该成为母亲》我认为略有偏颇，最然这句话出自文章本身，但不如英文原名深刻且简洁。同时，“The Push”\n其实也是全书的一个核心悬疑部分—究竟是不是书中的小女孩，维奥莱特，亲手把她的亲弟弟的婴儿车推向路中央从而酿成惨剧？\u003C/p>\n\u003Ch2 id=\"母亲的身份\">母亲的身份\u003C/h2>\n\u003Cp>当一个女性还在她母亲的子宫里时，她自己的子宫里也已经有了卵子，也就是说，母亲和女儿在同一个子宫中被孕育。此书用这句话作为扉页，其实也挑明了一个问题—\n女性获得母亲这一身份并非自愿。不是所有女孩都必须通过成为母亲，才能使她们的生命完备。将女性的价值捆绑在母亲的身份之上，是对女性自身意义的亵渎和屠杀。\u003C/p>\n\u003Ch2 id=\"婚姻\">婚姻\u003C/h2>\n\u003Cp>书里几乎提到了一切婚姻中会遇到的事，初恋时的甜蜜，婚后的琐碎，以及丈夫的外遇，让人不禁感叹：“Such is Life.”\u003C/p>\n\u003Ch2 id=\"败笔\">败笔\u003C/h2>\n\u003Cp>其实不是很理解为什么要写那个反社会人格的孩子，正如一个豆瓣说的，婚姻本身就已足够残忍，而这个孩子的性格的产生也似乎无法溯源，比较突兀。\u003C/p>",{"headings":211,"imagePaths":220,"frontmatter":221},[212,214,216,218],{"depth":26,"slug":213,"text":213},"关于书名",{"depth":26,"slug":215,"text":215},"母亲的身份",{"depth":26,"slug":217,"text":217},"婚姻",{"depth":26,"slug":219,"text":219},"败笔",[],{"title":202,"date":204,"tags":222,"summary":37,"draft":38,"author":39},[16],"the-push.md","thinking-is-a-privilege",{"id":224,"data":226,"body":231,"filePath":232,"digest":233,"rendered":234,"legacyId":243},{"title":227,"tags":228,"date":229,"lastModified":230,"isDraft":38},"思考是一种特权",[46],"2023-04-27",["Date","2023-04-27T00:00:00.000Z"],"这两天在论坛上看到一个帖子，其中提到一句话：“如果你买不起 Mac，去不了美国，未来也买不起 Mac，去不了美国。自然只能靠着网上的信息构建自己的认知，大概率会选择自己喜欢的信息进行构建。如果你的信息源就是错误的，越思考越错。”\n\n底下有人附和，但更多的是阴阳怪气。\n\n我看到这句话后，知道楼主在说什么，但他确实表达能力不是很好。我这里扩展一下，就当话题作文了。\n\n在互联网时代，大家似乎都习惯了有事没事打开手机，刷刷这个，刷刷那个，得益于推荐算法的日益成熟，每个 App 上都有一个属于你自己的“矩阵”，也就是“用户画像”。学过线性代数的都应该知道，每个矩阵都有自己的特征矩阵，是的，这就是推荐算法的核心。\n\n于是这些“矩阵”就像一个个数字牢笼一样，把手机前的你困住的同时还让你不自知。回到开头的话题，楼主的意思其实是：很多人无脑喷 Mac 或者 Windows，但那些人甚至都没自己买一台亲身去实践，就通过信息茧房得到了自己的“思考”，看到一条和自己想法一致的评论，就心满意足地滑开，同时忽视其他和他意见不一致的评论。\n\n现在网络上到处都在鼓吹“润”，但当我在现实生活中和那些在美国生活过的人聊过天会发现，美国没那么好，中国也没那么差。最近，当公司有 Transfer 到其他国家的机会的时候，很多人又变得不情愿了，因为他们不得不开始考虑国外的工资、税、房价、便利程度、有身份和没身份的区别、拿身份需要多久等等因素，当考虑完这一切他们就会觉得，好像国内还好一点。而那些鼓吹“润”的人，有多少会打开 Zillow 看看旧金山、温哥华的房价？\n\n另外一个例子，之前在腾讯的时候，绩效分五档，在脉脉上或者公司内部论坛上大家都觉得四五星是好的，大部分都是三星，二星就该离职了，但当我走之前和组长聊过才知道，总监评绩效的时候，往往会给那些勤劳加班的年轻人四五星和一般的年终奖，给自己真正的嫡系三星和丰厚的年终。原因在于年轻人喜欢面上的东西，而老人喜欢实在的，只有这些老人嫡系才能稳固总监的地位，加班的人拿四五星可以让大家更“卷”，当然了，前提是这些人本身能力也不差。然而这种事实往往没人会告诉你，更多情况是你身边和你一样拿三星的人会假惺惺地配合你一起抱怨不公，一起骂那些拿四星的人凭什么，但他们永远不会告诉你他真实的年终奖数字。\n\n这两个例子多少有点身边统计学了，不过至少也说明了一点，你想从网上找到有用的信息，无异于沙里淘金，运气好淘到了，运气不好浪费了大把时间，如果你甚至还去和其他人讲道理，那只会让这个数字牢笼把你困的越来越紧。\n\n最近 ChatGPT 很火，大家都觉得这玩意是“革命性的”。但以我个人愚见，它也只是一个聊天机器人，只不过搜集信息、归纳信息的能力更强，适用的场景更广泛了，最重要的一点，它不会独立思考。我比较悲观，觉得这个瓶颈在可预见的未来依然无法被突破，[Yoshua Bengio](https://yoshuabengio.org/research/) 老爷子可能要抱憾离世。\n\n所以啊，我们人类依然拥有思考的特权。放下手机，看看先贤们的书，然后安心地睡个好觉吧。","src/content/posts/thinking-is-a-privilege.md","7be07c6e57fd39d2",{"html":235,"metadata":236},"\u003Cp>这两天在论坛上看到一个帖子，其中提到一句话：“如果你买不起 Mac，去不了美国，未来也买不起 Mac，去不了美国。自然只能靠着网上的信息构建自己的认知，大概率会选择自己喜欢的信息进行构建。如果你的信息源就是错误的，越思考越错。”\u003C/p>\n\u003Cp>底下有人附和，但更多的是阴阳怪气。\u003C/p>\n\u003Cp>我看到这句话后，知道楼主在说什么，但他确实表达能力不是很好。我这里扩展一下，就当话题作文了。\u003C/p>\n\u003Cp>在互联网时代，大家似乎都习惯了有事没事打开手机，刷刷这个，刷刷那个，得益于推荐算法的日益成熟，每个 App 上都有一个属于你自己的“矩阵”，也就是“用户画像”。学过线性代数的都应该知道，每个矩阵都有自己的特征矩阵，是的，这就是推荐算法的核心。\u003C/p>\n\u003Cp>于是这些“矩阵”就像一个个数字牢笼一样，把手机前的你困住的同时还让你不自知。回到开头的话题，楼主的意思其实是：很多人无脑喷 Mac 或者 Windows，但那些人甚至都没自己买一台亲身去实践，就通过信息茧房得到了自己的“思考”，看到一条和自己想法一致的评论，就心满意足地滑开，同时忽视其他和他意见不一致的评论。\u003C/p>\n\u003Cp>现在网络上到处都在鼓吹“润”，但当我在现实生活中和那些在美国生活过的人聊过天会发现，美国没那么好，中国也没那么差。最近，当公司有 Transfer 到其他国家的机会的时候，很多人又变得不情愿了，因为他们不得不开始考虑国外的工资、税、房价、便利程度、有身份和没身份的区别、拿身份需要多久等等因素，当考虑完这一切他们就会觉得，好像国内还好一点。而那些鼓吹“润”的人，有多少会打开 Zillow 看看旧金山、温哥华的房价？\u003C/p>\n\u003Cp>另外一个例子，之前在腾讯的时候，绩效分五档，在脉脉上或者公司内部论坛上大家都觉得四五星是好的，大部分都是三星，二星就该离职了，但当我走之前和组长聊过才知道，总监评绩效的时候，往往会给那些勤劳加班的年轻人四五星和一般的年终奖，给自己真正的嫡系三星和丰厚的年终。原因在于年轻人喜欢面上的东西，而老人喜欢实在的，只有这些老人嫡系才能稳固总监的地位，加班的人拿四五星可以让大家更“卷”，当然了，前提是这些人本身能力也不差。然而这种事实往往没人会告诉你，更多情况是你身边和你一样拿三星的人会假惺惺地配合你一起抱怨不公，一起骂那些拿四星的人凭什么，但他们永远不会告诉你他真实的年终奖数字。\u003C/p>\n\u003Cp>这两个例子多少有点身边统计学了，不过至少也说明了一点，你想从网上找到有用的信息，无异于沙里淘金，运气好淘到了，运气不好浪费了大把时间，如果你甚至还去和其他人讲道理，那只会让这个数字牢笼把你困的越来越紧。\u003C/p>\n\u003Cp>最近 ChatGPT 很火，大家都觉得这玩意是“革命性的”。但以我个人愚见，它也只是一个聊天机器人，只不过搜集信息、归纳信息的能力更强，适用的场景更广泛了，最重要的一点，它不会独立思考。我比较悲观，觉得这个瓶颈在可预见的未来依然无法被突破，\u003Ca href=\"https://yoshuabengio.org/research/\">Yoshua Bengio\u003C/a> 老爷子可能要抱憾离世。\u003C/p>\n\u003Cp>所以啊，我们人类依然拥有思考的特权。放下手机，看看先贤们的书，然后安心地睡个好觉吧。\u003C/p>",{"headings":237,"imagePaths":238,"frontmatter":239},[],[],{"title":227,"date":229,"tags":240,"summary":241,"isDraft":38,"lastModified":242},[46],"浏览一篇V2EX帖子有感",["Date","2023-04-27T00:00:00.000Z"],"thinking-is-a-privilege.md","zhuang-zi-qi-wu-lun",{"id":244,"data":246,"body":250,"filePath":251,"digest":252,"rendered":253,"legacyId":260},{"title":247,"tags":248,"date":249},"网络众生相",[46],"2024-06-23","> 大知闲闲，小知閒閒。大言炎炎，小言詹詹。其寐也魂交，其觉也形开。与接为构，日以心斗。缦者、窖者、密者。小恐惴惴，大恐缦缦。其发若机栝，其司是非之谓也；其留如诅盟，其守胜之谓也；其杀如秋冬，以言其日消也；其溺之所为之，不可使复之也；其厌也如缄，以言其老洫也；近死之心，莫使复阳也。喜怒哀乐，虑叹变慹，姚佚启态。乐出虚，蒸成菌。日夜相代乎前而莫知其所萌。已乎，已乎！旦暮得此，其所由以生乎！\n>\n> **译文：**\n>\n> 大智的人广博雅致，小智的人固执偏狭；高谈阔论的人盛气凌人，具体而论的人争辩不休。他们睡觉时魂魄也不安宁，等睡醒后身疲气散。他们整天与外界交涉纠缠，日复一日勾心斗角。有的散漫不经，有的藏奸不露，有的谨慎精细。小惧怕时惴惴不安，大恐惧时惊魂失魄。他们有时发言就像放出的利箭，窥伺到别人的是非来进行攻击；他们有时片语不吐就像发过誓约一样，不过是等待致胜的机会；他们正在衰竭着，犹如秋冬的萧条，这是说他们一天天地走向消亡；他们沉溺于辩论的作为中，不可能使他们再恢复本然之性；他们心灵闭塞，如同被绳索束缚，这说明他们已如废旧的沟洫，源头之水已经枯竭了；走向死亡的心灵，再也没有办法使他们恢复生机了。他们时而欣喜，时而愤怒，时而悲哀，时而快乐；有时多虑，有时感叹，有时后悔，有时恐惧；有的轻浮，有的放纵，有的张狂，有的作态；就像音乐从虚空的东西里发出来的一样，又像菌类被地气蒸发出来的一样。这种种情绪和心态日夜变化着，时不时更替出现，但却不知是从哪里萌生的。算了吧，算了吧！一旦得知这些情态从哪里产生，也就明白这些情态之所以产生的根由了！\n\n以上节选自《**_庄子·内篇·齐物论_**》，愚以为，网络众生相莫过于此。","src/content/posts/zhuang-zi-qi-wu-lun.md","28bad6d661e331a2",{"html":254,"metadata":255},"\u003Cblockquote>\n\u003Cp>大知闲闲，小知閒閒。大言炎炎，小言詹詹。其寐也魂交，其觉也形开。与接为构，日以心斗。缦者、窖者、密者。小恐惴惴，大恐缦缦。其发若机栝，其司是非之谓也；其留如诅盟，其守胜之谓也；其杀如秋冬，以言其日消也；其溺之所为之，不可使复之也；其厌也如缄，以言其老洫也；近死之心，莫使复阳也。喜怒哀乐，虑叹变慹，姚佚启态。乐出虚，蒸成菌。日夜相代乎前而莫知其所萌。已乎，已乎！旦暮得此，其所由以生乎！\u003C/p>\n\u003Cp>\u003Cstrong>译文：\u003C/strong>\u003C/p>\n\u003Cp>大智的人广博雅致，小智的人固执偏狭；高谈阔论的人盛气凌人，具体而论的人争辩不休。他们睡觉时魂魄也不安宁，等睡醒后身疲气散。他们整天与外界交涉纠缠，日复一日勾心斗角。有的散漫不经，有的藏奸不露，有的谨慎精细。小惧怕时惴惴不安，大恐惧时惊魂失魄。他们有时发言就像放出的利箭，窥伺到别人的是非来进行攻击；他们有时片语不吐就像发过誓约一样，不过是等待致胜的机会；他们正在衰竭着，犹如秋冬的萧条，这是说他们一天天地走向消亡；他们沉溺于辩论的作为中，不可能使他们再恢复本然之性；他们心灵闭塞，如同被绳索束缚，这说明他们已如废旧的沟洫，源头之水已经枯竭了；走向死亡的心灵，再也没有办法使他们恢复生机了。他们时而欣喜，时而愤怒，时而悲哀，时而快乐；有时多虑，有时感叹，有时后悔，有时恐惧；有的轻浮，有的放纵，有的张狂，有的作态；就像音乐从虚空的东西里发出来的一样，又像菌类被地气蒸发出来的一样。这种种情绪和心态日夜变化着，时不时更替出现，但却不知是从哪里萌生的。算了吧，算了吧！一旦得知这些情态从哪里产生，也就明白这些情态之所以产生的根由了！\u003C/p>\n\u003C/blockquote>\n\u003Cp>以上节选自《\u003Cstrong>\u003Cem>庄子·内篇·齐物论\u003C/em>\u003C/strong>》，愚以为，网络众生相莫过于此。\u003C/p>",{"headings":256,"imagePaths":257,"frontmatter":258},[],[],{"title":247,"date":249,"tags":259},[46],"zhuang-zi-qi-wu-lun.md","simple-string",{"id":261,"data":263,"body":268,"filePath":269,"digest":270,"rendered":271,"legacyId":282},{"title":264,"tags":265,"date":267},"实现一个简易的C++ String类",[266],"cpp","2022-09-24","# 概述\n\n实现 String 类的核心就是重写构造器和重载运算符.\n\n## 头文件\n\n我们需要定义的有：\n\n- Original Constructor\n- Copy Constructor\n- Move Constructor\n- Copy Assignment\n- Move Assignment\n- Destructor\n- Indexer\n- Equal/NotEqual Operator\n\n```cpp\n#ifndef CAMILLE_STRING_H\n#define CAMILLE_STRING_H\n\n// using char to store\nclass String {\n  char* str;\n\npublic:\n  String(const char* s = \"\");\n  String(const String&); // copy constructor\n  String& operator=(const String&); // copy assignment\n  String(String &&) noexcept ; // move constructor\n  String& operator=(String&&) noexcept ; // move assignment\n  ~String(); // destructor\n  operator const char* ();\n  String operator+(const String&);\n  String &operator+=(const String&);\n  char operator[](int) const;\n  char &operator[](int);\n  String operator()(int, int);\n  bool operator==(const String&);\n  bool operator!=(const String&);\n};\n\n#endif\n\n```","src/content/posts/simple-string.md","ce9df0430e438bed",{"html":272,"metadata":273},"\u003Ch1 id=\"概述\">概述\u003C/h1>\n\u003Cp>实现 String 类的核心就是重写构造器和重载运算符.\u003C/p>\n\u003Ch2 id=\"头文件\">头文件\u003C/h2>\n\u003Cp>我们需要定义的有：\u003C/p>\n\u003Cul>\n\u003Cli>Original Constructor\u003C/li>\n\u003Cli>Copy Constructor\u003C/li>\n\u003Cli>Move Constructor\u003C/li>\n\u003Cli>Copy Assignment\u003C/li>\n\u003Cli>Move Assignment\u003C/li>\n\u003Cli>Destructor\u003C/li>\n\u003Cli>Indexer\u003C/li>\n\u003Cli>Equal/NotEqual Operator\u003C/li>\n\u003C/ul>\n\u003Cdiv class=\"expressive-code\">\u003Clink rel=\"stylesheet\" href=\"/_astro/ec.6xp1a.css\">\u003Cscript type=\"module\" src=\"/_astro/ec.8zarh.js\">\u003C/script>\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"cpp\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#ifndef\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">CAMILLE_STRING_H\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#define\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">CAMILLE_STRING_H\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// using char to store\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">class\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> str;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">public:\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // copy constructor\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // copy assignment\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">noexcept\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> ;\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // move constructor\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">noexcept\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> ;\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // move assignment\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">~String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // destructor\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">  \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">operator \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> ();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">+\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">+=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">[]\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">[]\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">()\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">operator\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">String\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">};\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#endif\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#ifndef CAMILLE_STRING_H#define CAMILLE_STRING_H// using char to storeclass String {  char* str;public:  String(const char* s = &#x22;&#x22;);  String(const String&#x26;); // copy constructor  String&#x26; operator=(const String&#x26;); // copy assignment  String(String &#x26;&#x26;) noexcept ; // move constructor  String&#x26; operator=(String&#x26;&#x26;) noexcept ; // move assignment  ~String(); // destructor  operator const char* ();  String operator+(const String&#x26;);  String &#x26;operator+=(const String&#x26;);  char operator[](int) const;  char &#x26;operator[](int);  String operator()(int, int);  bool operator==(const String&#x26;);  bool operator!=(const String&#x26;);};#endif\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>",{"headings":274,"imagePaths":279,"frontmatter":280},[275,277],{"depth":141,"slug":276,"text":276},"概述",{"depth":26,"slug":278,"text":278},"头文件",[],{"title":264,"date":267,"tags":281,"summary":37,"draft":38,"author":39},[266],"simple-string.md","simple-shell",{"id":283,"data":285,"body":290,"filePath":291,"digest":292,"rendered":293,"legacyId":311},{"title":286,"tags":287,"date":289},"实现一个简易Shell",[288],"c","2022-09-12","# 概述\n\n根据 Stephen Brennan 的 Tutorial 实现的一个简易的 Shell.\n\n## 一个 Shell 的生命周期\n\n一个 Shell 的生命周期包括三个基本部分：\n\n- 初始化： Shell 读取并执行配置文件；\n- 转译： Shell 读取标准输入（交互式输入或者文件）并执行；\n- 终止： 命令执行完毕，Shell 执行结束命令，释放内存并终止；\n\n因此， 我们可以得到主函数的基本结构：\n\n```c\nint main() {\n  ls_loop();\n  return EXIT_SUCCESS;\n}\n```\n\n## Shell 中的基本循环\n\n循环分三步：\n\n- 读： 读取标准输入的指令；\n- 解析： 将输入的命令字符串分割成程序和参数；\n- 执行： 运行解析好的命令。\n\n这样我们可以得到循环体内的基本逻辑：\n\n```c\nvoid lsh_loop(void)\n{\n  char *line;\n  char **args;\n  int status;\n\n  do {\n    printf(\"> \");\n    line = lsh_read_line();\n    args = lsh_split_line(line);\n    status = lsh_execute(args);\n\n    free(line);\n    free(args);\n  } while (status);\n}\n```\n\n## 内置命令\n\n为什么需要内置命令呢？以`cd`命令为例，它的作用是改变目录，那么如果 Shell 将该命令交给子进程去执行，那么\n就只能改变子进程的目录，对于用户来说等于什么都没做，这显然不是我们想要的结果。所以需要将此类命令作为内置命令实现。\n\n## 完整实现\n\n```c\n#include \u003Cstdio.h>\n#include \u003Cstdlib.h>\n#include \u003Cstring.h>\n#include \u003Cunistd.h>\n#include \u003Csys/wait.h>\n\n#define LSH_RL_BUF_SIZE 1024\nchar *lsh_read_line_old(void) {\n  int buf_size = LSH_RL_BUF_SIZE;\n  int position = 0;\n  char *buffer = malloc(sizeof(char) * buf_size);\n  int c;\n\n  if (!buffer) {\n    fprintf(stderr, \"lsh: allocation error\\n\");\n    exit(EXIT_FAILURE);\n  }\n\n  while (1) {\n    // Read a character\n    c = getchar();\n\n    // if we hit EOF, replace it with a null character and return\n    if (c == EOF || c == '\\n') {\n        buffer[position] = '\\0';\n        return buffer;\n    } else {\n        buffer[position] = c;\n    }\n    position++;\n\n    // if we have exceeded the buffer, reallocate\n    if (position >= buf_size) {\n        buf_size += LSH_RL_BUF_SIZE;\n        buffer = realloc(buffer, buf_size);\n        if (!buffer) {\n            fprintf(stderr, \"lsh: allocation error\\n\");\n            exit(EXIT_FAILURE);\n        }\n    }\n  }\n}\n\nchar *lsh_read_line_new(void) {\n    char* line = NULL;\n    ssize_t buf_size = 0; // have getline allocate a buffer for us\n\n    if (getline(&line, &buf_size, stdin) == -1) {\n        if (feof(stdin)) {\n            exit(EXIT_SUCCESS); // we received an EOF\n        } else {\n            perror(\"readline\");\n            exit(EXIT_FAILURE);\n        }\n    }\n    return line;\n}\n\n#define LSH_TOK_BUF_SIZE 64\n#define LSH_TOK_DELIM \" \\t\\r\\n\\a\"\nchar **lsh_split_line(char *line) {\n    int buf_size = LSH_TOK_BUF_SIZE, position = 0;\n    char **tokens = malloc(buf_size * sizeof(char*));\n    char *token;\n\n    if (!tokens) {\n        fprintf(stderr, \"lsh: allocation error\\n\");\n        exit(EXIT_FAILURE);\n    }\n\n    token = strtok(line, LSH_TOK_DELIM);\n    while (token != NULL) {\n        tokens[position] = token;\n        position++;\n\n        if (position >= buf_size) {\n            buf_size += LSH_RL_BUF_SIZE;\n            tokens = realloc(tokens, buf_size * sizeof(char*));\n            if (!tokens) {\n                fprintf(stderr, \"lsh: allocation error\\n\");\n                exit(EXIT_FAILURE);\n            }\n        }\n\n        token = strtok(NULL, LSH_TOK_DELIM);\n    }\n    tokens[position] = NULL;\n    return tokens;\n}\n\nint lsh_launch(char** args) {\n    pid_t pid, wpid;\n    int status;\n\n    pid = fork();\n    if (pid == 0) {\n        // Child process\n        if (execvp(args[0], args) == -1) {\n            perror(\"lsh child process execute error!\");\n        }\n        exit(EXIT_FAILURE);\n    } else if (pid \u003C 0) {\n        // Error in forking\n        perror(\"lsh fork error!\");\n    } else {\n        // Parent process\n        do {\n            wpid = waitpid(pid, &status, WUNTRACED);\n        } while (!WIFEXITED(status) && !WIFSIGNALED(status));\n    }\n    return 1;\n}\n\n/*\n * Function declaration for builtin shell commands:\n */\nint lsh_cd(char **args);\nint lsh_help(char **args);\nint lsh_exit(char **args);\n\n/*\n * List of builtin commands, followed by their corresponding functions.\n */\nchar* builtin_str[] = {\n        \"cd\",\n        \"help\",\n        \"exit\"\n};\n\nint (*builtin_func[]) (char**) = {\n        &lsh_cd,\n        &lsh_help,\n        &lsh_exit\n};\n\nint lsh_num_builtins() {\n    return sizeof(builtin_str) / sizeof(char*);\n}\n\n/*\n * Builtin function implementation\n */\nint lsh_cd(char** args) {\n    if (args[1] == NULL) {\n        fprintf(stderr, \"lsh: expected argument to \\\"cd\\\"\\n\");\n    } else {\n        if (chdir(args[1]) != 0) {\n            perror(\"lsh change directory error!\");\n        }\n    }\n    return 1;\n}\n\nint lsh_help(char** args) {\n    int i;\n    printf(\"LSH from scratch\\n\");\n    printf(\"Type program names and arguments, and hit enter.\\n\");\n    printf(\"The following are built in:\\n\");\n\n    for (i = 0; i \u003C lsh_num_builtins(); i++) {\n        printf(\" %s\\n\", builtin_str[i]);\n    }\n\n    printf(\"Use the man command for information and other programs.\\n\");\n    return 1;\n}\n\nint lsh_exit(char** args) {\n    return 0;\n}\n\nint lsh_execute(char **args) {\n    int i;\n    if (args[0] == NULL) {\n        // An empty command was entered.\n        return 1;\n    }\n    // Find the matched builtin command and execute it\n    for (i = 0; i \u003C lsh_num_builtins(); i++) {\n        if (strcmp(args[0], builtin_str[i]) == 0) {\n            return (*builtin_func[i])(args);\n        }\n    }\n    return lsh_launch(args);\n}\n\nvoid ls_loop(void) {\n    char *line;\n    char **args;\n    int status;\n\n    do {\n        printf(\"> \");\n        line = lsh_read_line_new();\n        args = lsh_split_line(line);\n        status = lsh_execute(args);\n    } while (status);\n}\n\nint main() {\n  ls_loop();\n  return EXIT_SUCCESS;\n}\n```","src/content/posts/simple-shell.md","f6788ef92ef5525d",{"html":294,"metadata":295},"\u003Ch1 id=\"概述\">概述\u003C/h1>\n\u003Cp>根据 Stephen Brennan 的 Tutorial 实现的一个简易的 Shell.\u003C/p>\n\u003Ch2 id=\"一个-shell-的生命周期\">一个 Shell 的生命周期\u003C/h2>\n\u003Cp>一个 Shell 的生命周期包括三个基本部分：\u003C/p>\n\u003Cul>\n\u003Cli>初始化： Shell 读取并执行配置文件；\u003C/li>\n\u003Cli>转译： Shell 读取标准输入（交互式输入或者文件）并执行；\u003C/li>\n\u003Cli>终止： 命令执行完毕，Shell 执行结束命令，释放内存并终止；\u003C/li>\n\u003C/ul>\n\u003Cp>因此， 我们可以得到主函数的基本结构：\u003C/p>\n\u003Cdiv class=\"expressive-code\">\u003Clink rel=\"stylesheet\" href=\"/_astro/ec.6xp1a.css\">\u003Cscript type=\"module\" src=\"/_astro/ec.8zarh.js\">\u003C/script>\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">main\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">() {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">ls_loop\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> EXIT_SUCCESS;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"int main() {  ls_loop();  return EXIT_SUCCESS;}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Ch2 id=\"shell-中的基本循环\">Shell 中的基本循环\u003C/h2>\n\u003Cp>循环分三步：\u003C/p>\n\u003Cul>\n\u003Cli>读： 读取标准输入的指令；\u003C/li>\n\u003Cli>解析： 将输入的命令字符串分割成程序和参数；\u003C/li>\n\u003Cli>执行： 运行解析好的命令。\u003C/li>\n\u003C/ul>\n\u003Cp>这样我们可以得到循环体内的基本逻辑：\u003C/p>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_loop\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">)\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">{\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">line;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">args;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> status;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">do\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"> \"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">line \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_read_line\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">args \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_split_line\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(line);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">status \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_execute\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(args);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(line);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(args);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">  \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (status);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"void lsh_loop(void){  char *line;  char **args;  int status;  do {    printf(&#x22;> &#x22;);    line = lsh_read_line();    args = lsh_split_line(line);    status = lsh_execute(args);    free(line);    free(args);  } while (status);}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Ch2 id=\"内置命令\">内置命令\u003C/h2>\n\u003Cp>为什么需要内置命令呢？以\u003Ccode>cd\u003C/code>命令为例，它的作用是改变目录，那么如果 Shell 将该命令交给子进程去执行，那么\n就只能改变子进程的目录，对于用户来说等于什么都没做，这显然不是我们想要的结果。所以需要将此类命令作为内置命令实现。\u003C/p>\n\u003Ch2 id=\"完整实现\">完整实现\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;stdio.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;stdlib.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;string.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;unistd.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;sys/wait.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#define\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">LSH_RL_BUF_SIZE\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1024\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_read_line_old\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> LSH_RL_BUF_SIZE;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> position \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buffer \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> c;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buffer) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fprintf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stderr, \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh: allocation error\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">  \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// Read a character\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">c \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">getchar\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// if we hit EOF, replace it with a null character and return\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (c \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> EOF \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">||\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> c \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">buffer\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[position] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\0\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buffer;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">buffer\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[position] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> c;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">position\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// if we have exceeded the buffer, reallocate\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (position \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">>=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">+=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> LSH_RL_BUF_SIZE;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buffer \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">realloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(buffer, buf_size);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buffer) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fprintf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stderr, \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh: allocation error\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">  \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_read_line_new\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> line \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">ssize_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // have getline allocate a buffer for us\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">getline\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">line, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buf_size, stdin) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">-\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">feof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stdin)) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_SUCCESS);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // we received an EOF\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">perror\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"readline\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> line;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#define\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">LSH_TOK_BUF_SIZE\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">64\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#define\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">LSH_TOK_DELIM\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\" \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\t\\r\\n\\a\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_split_line\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">line\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> LSH_TOK_BUF_SIZE, position \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tokens \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">token;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tokens) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fprintf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stderr, \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh: allocation error\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">token \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strtok\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(line, LSH_TOK_DELIM);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (token \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">tokens\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[position] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> token;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">position\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (position \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">>=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> buf_size) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">+=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> LSH_RL_BUF_SIZE;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tokens \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">realloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(tokens, buf_size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tokens) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">                \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fprintf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stderr, \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh: allocation error\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">                \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">token \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strtok\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, LSH_TOK_DELIM);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">tokens\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[position] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> tokens;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_launch\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">pid_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> pid, wpid;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> status;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">pid \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fork\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (pid \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// Child process\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">execvp\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">], args) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">-\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">perror\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh child process execute error!\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(EXIT_FAILURE);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (pid \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x3C;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// Error in forking\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">perror\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh fork error!\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// Parent process\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">do\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">wpid \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">waitpid\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(pid, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">status, WUNTRACED);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">WIFEXITED\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(status) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">WIFSIGNALED\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(status));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* Function declaration for builtin shell commands:\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_cd\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_help\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* List of builtin commands, followed by their corresponding functions.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> builtin_str\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">[]\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"cd\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">,\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"help\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">,\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"exit\"\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">};\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">builtin_func\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">[]\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">lsh_cd,\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">lsh_help,\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x26;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">lsh_exit\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">};\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_num_builtins\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">() {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(builtin_str) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">/\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* Builtin function implementation\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_cd\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">fprintf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(stderr, \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh: expected argument to \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\\"\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">cd\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\\"\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">chdir\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">]) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">perror\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"lsh change directory error!\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_help\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> i;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"LSH from scratch\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"Type program names and arguments, and hit enter.\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"The following are built in:\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">for\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (i \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">; i \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x3C;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_num_builtins\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(); i\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\" \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">%s\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">builtin_str\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[i]);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"Use the man command for information and other programs.\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\n\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_exit\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_execute\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> i;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// An empty command was entered.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">// Find the matched builtin command and execute it\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">for\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (i \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">; i \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">&#x3C;\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_num_builtins\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(); i\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strcmp\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">args\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">], \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">builtin_str\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[i]) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">builtin_func\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[i])(args);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_launch\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(args);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">ls_loop\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">line;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">**\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">args;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> status;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">do\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">printf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">\"> \"\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">line \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_read_line_new\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">args \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_split_line\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(line);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">status \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">lsh_execute\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(args);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (status);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">main\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">() {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">ls_loop\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">();\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">  \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> EXIT_SUCCESS;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#include \u003Cstdio.h>#include \u003Cstdlib.h>#include \u003Cstring.h>#include \u003Cunistd.h>#include \u003Csys/wait.h>#define LSH_RL_BUF_SIZE 1024char *lsh_read_line_old(void) {  int buf_size = LSH_RL_BUF_SIZE;  int position = 0;  char *buffer = malloc(sizeof(char) * buf_size);  int c;  if (!buffer) {    fprintf(stderr, &#x22;lsh: allocation error\\n&#x22;);    exit(EXIT_FAILURE);  }  while (1) {    // Read a character    c = getchar();    // if we hit EOF, replace it with a null character and return    if (c == EOF || c == &#x27;\\n&#x27;) {        buffer[position] = &#x27;\\0&#x27;;        return buffer;    } else {        buffer[position] = c;    }    position++;    // if we have exceeded the buffer, reallocate    if (position >= buf_size) {        buf_size += LSH_RL_BUF_SIZE;        buffer = realloc(buffer, buf_size);        if (!buffer) {            fprintf(stderr, &#x22;lsh: allocation error\\n&#x22;);            exit(EXIT_FAILURE);        }    }  }}char *lsh_read_line_new(void) {    char* line = NULL;    ssize_t buf_size = 0; // have getline allocate a buffer for us    if (getline(&#x26;line, &#x26;buf_size, stdin) == -1) {        if (feof(stdin)) {            exit(EXIT_SUCCESS); // we received an EOF        } else {            perror(&#x22;readline&#x22;);            exit(EXIT_FAILURE);        }    }    return line;}#define LSH_TOK_BUF_SIZE 64#define LSH_TOK_DELIM &#x22; \\t\\r\\n\\a&#x22;char **lsh_split_line(char *line) {    int buf_size = LSH_TOK_BUF_SIZE, position = 0;    char **tokens = malloc(buf_size * sizeof(char*));    char *token;    if (!tokens) {        fprintf(stderr, &#x22;lsh: allocation error\\n&#x22;);        exit(EXIT_FAILURE);    }    token = strtok(line, LSH_TOK_DELIM);    while (token != NULL) {        tokens[position] = token;        position++;        if (position >= buf_size) {            buf_size += LSH_RL_BUF_SIZE;            tokens = realloc(tokens, buf_size * sizeof(char*));            if (!tokens) {                fprintf(stderr, &#x22;lsh: allocation error\\n&#x22;);                exit(EXIT_FAILURE);            }        }        token = strtok(NULL, LSH_TOK_DELIM);    }    tokens[position] = NULL;    return tokens;}int lsh_launch(char** args) {    pid_t pid, wpid;    int status;    pid = fork();    if (pid == 0) {        // Child process        if (execvp(args[0], args) == -1) {            perror(&#x22;lsh child process execute error!&#x22;);        }        exit(EXIT_FAILURE);    } else if (pid \u003C 0) {        // Error in forking        perror(&#x22;lsh fork error!&#x22;);    } else {        // Parent process        do {            wpid = waitpid(pid, &#x26;status, WUNTRACED);        } while (!WIFEXITED(status) &#x26;&#x26; !WIFSIGNALED(status));    }    return 1;}/* * Function declaration for builtin shell commands: */int lsh_cd(char **args);int lsh_help(char **args);int lsh_exit(char **args);/* * List of builtin commands, followed by their corresponding functions. */char* builtin_str[] = {        &#x22;cd&#x22;,        &#x22;help&#x22;,        &#x22;exit&#x22;};int (*builtin_func[]) (char**) = {        &#x26;lsh_cd,        &#x26;lsh_help,        &#x26;lsh_exit};int lsh_num_builtins() {    return sizeof(builtin_str) / sizeof(char*);}/* * Builtin function implementation */int lsh_cd(char** args) {    if (args[1] == NULL) {        fprintf(stderr, &#x22;lsh: expected argument to \\&#x22;cd\\&#x22;\\n&#x22;);    } else {        if (chdir(args[1]) != 0) {            perror(&#x22;lsh change directory error!&#x22;);        }    }    return 1;}int lsh_help(char** args) {    int i;    printf(&#x22;LSH from scratch\\n&#x22;);    printf(&#x22;Type program names and arguments, and hit enter.\\n&#x22;);    printf(&#x22;The following are built in:\\n&#x22;);    for (i = 0; i \u003C lsh_num_builtins(); i++) {        printf(&#x22; %s\\n&#x22;, builtin_str[i]);    }    printf(&#x22;Use the man command for information and other programs.\\n&#x22;);    return 1;}int lsh_exit(char** args) {    return 0;}int lsh_execute(char **args) {    int i;    if (args[0] == NULL) {        // An empty command was entered.        return 1;    }    // Find the matched builtin command and execute it    for (i = 0; i \u003C lsh_num_builtins(); i++) {        if (strcmp(args[0], builtin_str[i]) == 0) {            return (*builtin_func[i])(args);        }    }    return lsh_launch(args);}void ls_loop(void) {    char *line;    char **args;    int status;    do {        printf(&#x22;> &#x22;);        line = lsh_read_line_new();        args = lsh_split_line(line);        status = lsh_execute(args);    } while (status);}int main() {  ls_loop();  return EXIT_SUCCESS;}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>",{"headings":296,"imagePaths":308,"frontmatter":309},[297,298,301,304,306],{"depth":141,"slug":276,"text":276},{"depth":26,"slug":299,"text":300},"一个-shell-的生命周期","一个 Shell 的生命周期",{"depth":26,"slug":302,"text":303},"shell-中的基本循环","Shell 中的基本循环",{"depth":26,"slug":305,"text":305},"内置命令",{"depth":26,"slug":307,"text":307},"完整实现",[],{"title":286,"date":289,"tags":310,"summary":37,"draft":38,"author":39},[288],"simple-shell.md","cmu_15-213_lab0",{"id":312,"data":314,"body":319,"filePath":320,"digest":321,"rendered":322,"legacyId":347},{"title":315,"tags":316,"date":318},"CMU 15-213 Lab0",[288,317],"cmu_15_213","2022-10-11","# 概述\n\n利用 C 语言实现一个队列的基本功能，包括：\n\n- 创建队列\n- 销毁队列\n- 头部入队\n- 尾部入队\n- 头部出队\n- 获取队列长度\n- 反转队列\n\n核心在于每次对队列操作前都要考虑是否为空的情况，保证代码的鲁棒性。\n\n## 头文件\n\n```c\n#include \u003Cstdbool.h>\n#include \u003Cstddef.h>\n\n/* element struct in queue */\ntypedef struct list_ele {\n    char *value;\n    struct list_ele *next;\n} list_ele_t;\n\ntypedef struct {\n    list_ele_t *head;\n    list_ele_t *tail;\n    int size; // use the above two variable to record the size of the queue to avoid traversal\n} queue_t;\n\n/* Create empty queue. */\nqueue_t *queue_new(void);\n\n/* Free ALL storage used by queue. */\nvoid queue_free(queue_t *q);\n\n/* Attempt to insert element at head of queue. */\nbool queue_insert_head(queue_t *q, const char *s);\n\n/* Attempt to insert element at tail of queue. */\nbool queue_insert_tail(queue_t *q, const char *s);\n\n/* Attempt to remove element from head of queue. */\nbool queue_remove_head(queue_t *q, char *sp, size_t bufsize);\n\n/* Return number of elements in queue. */\nsize_t queue_size(queue_t *q);\n\n/* Reverse elements in queue */\nvoid queue_reverse(queue_t *q);\n```\n\n可以看到，在源文件的基础上，新增了尾节点和队列大小两个属性，当然也可以不加，但如果没有这两个变量，计算队列大小或者进行尾部入队操作的时间复杂度就不是常量了，而是线性增长的。\n\n下面我们具体看每个函数的实现。\n\n## 创建队列\n\n```c\n/**\n * @brief Allocates a new queue\n * @return The new queue, or NULL if memory allocation failed\n */\nqueue_t *queue_new(void) {\n    queue_t *q = malloc(sizeof(queue_t));\n    /* What if malloc returned NULL? */\n    if (q == NULL) {\n        return NULL;\n    } else {\n        q->head = NULL;\n        q->tail = NULL;\n        q->size = 0;\n        return q;\n    }\n}\n```\n\n这一步没什么问题，主要就是分配队列空间并初始化队列的各个属性。\n\n## 销毁队列\n\n```c\n/**\n * @brief Frees all memory used by a queue\n * @param[in] q The queue to free\n */\nvoid queue_free(queue_t *q) {\n    /* How about freeing the list elements and the strings? */\n    /* Free queue structure */\n    if (q == NULL) {\n        return;\n    } else {\n        list_ele_t *tmp;\n        while (q->head != NULL) {\n            tmp = q->head;\n            q->head = q->head->next;\n            free(tmp->value); // free element's value\n            free(tmp) // free element itself\n        }\n    }\n    free(q); // free queue\n}\n```\n\n如上所述，判断完队列是否为空，还需要判断队列的属性是否为空。\n\n## 头部入队\n\n```c\n/**\n * @brief Attempts to insert an element at head of a queue\n *\n * This function explicitly allocates space to create a copy of `s`.\n * The inserted element points to a copy of `s`, instead of `s` itself.\n *\n * @param[in] q The queue to insert into\n * @param[in] s String to be copied and inserted into the queue\n *\n * @return true if insertion was successful\n * @return false if q is NULL, or memory allocation failed\n */\nbool queue_insert_head(queue_t *q, const char *s) {\n    list_ele_t *newh;\n    /* What should you do if the q is NULL? */\n    if (q == NULL) {\n        return false;\n    }\n    /* Don't forget to allocate space for the string and copy it */\n    /* What if either call to malloc returns NULL? */\n    newh = malloc(sizeof(list_ele_t));\n    if (newh == NULL) {\n        return false;\n    } else {\n        newh->value = malloc(sizeof(char) * (strlen(s) + 1));\n        if (newh->value == NULL) {\n            free(newh); // must free the space if malloc failed\n            return false;\n        } else {\n            strcpy(newh->value, s);\n            newh->next = q->head;\n            q->head = newh;\n\n            if (q->tail == NULL) {\n                q->tail = newh;\n            }\n            ++q->size;\n            return true;\n        }\n    }\n}\n```\n\n除了判断队列及队列元素是否为空，还要判断`malloc()`是否成功，\n正常来讲，内存分配成功的话，会返回一个可以指向任意类型的指针，但该指针必须通过`free()`或者`realloc()`回收。\n如果分配失败了，会返回一个空指针，我们需要对其进行判断。\n\n## 尾部入队\n\n```c\n/**\n * @brief Attempts to insert an element at tail of a queue\n *\n * This function explicitly allocates space to create a copy of `s`.\n * The inserted element points to a copy of `s`, instead of `s` itself.\n *\n * @param[in] q The queue to insert into\n * @param[in] s String to be copied and inserted into the queue\n *\n * @return true if insertion was successful\n * @return false if q is NULL, or memory allocation failed\n */\nbool queue_insert_tail(queue_t *q, const char *s) {\n    /* You need to write the complete code for this function */\n    /* Remember: It should operate in O(1) time */\n    list_ele_t *newt;\n    /* What should you do if the q is NULL? */\n    if (q == NULL) {\n        return false;\n    }\n    /* Don't forget to allocate space for the string and copy it */\n    /* What if either call to malloc returns NULL? */\n    newt = malloc(sizeof(list_ele_t));\n    if (newt == NULL) {\n        return false;\n    } else {\n        newt->value = malloc(sizeof(char) * (strlen(s) + 1));\n        if (newt->value == NULL) {\n            free(newt);\n            return false;\n        } else {\n            strcpy(newt->value, s);\n            newt->next = NULL;\n\n            if (q->tail != NULL) {\n                q->tail->next = newt;\n                q->tail = newt;\n            } else {\n                q->head = newt;\n                q->tail = newt;\n            }\n            ++q->size;\n            return true;\n        }\n    }\n}\n```\n\n这一步和头部入队类似，不同点在于需要对尾节点是否存在进行判断，而头部入队时是不需要判断头节点是否存在的，因为必然要进行重新分配且不需要对其执行查找下一个节点的操作。\n\n## 头部出队\n\n```c\n/**\n * @brief Attempts to remove an element from head of a queue\n *\n * If removal succeeds, this function frees all memory used by the\n * removed list element and its string value before returning.\n *\n * If removal succeeds and `buf` is non-NULL, this function copies up to\n * `bufsize - 1` characters from the removed string into `buf`, and writes\n * a null terminator '\\0' after the copied string.\n *\n * @param[in]  q       The queue to remove from\n * @param[out] buf     Output buffer to write a string value into\n * @param[in]  bufsize Size of the buffer `buf` points to\n *\n * @return true if removal succeeded\n * @return false if q is NULL or empty\n */\nbool queue_remove_head(queue_t *q, char *buf, size_t bufsize) {\n    if (q == NULL) {\n        return false;\n    }\n    if (q->head == NULL) {\n        return false;\n    } else {\n        list_ele_t *temp = q->head;\n        q->head = q->head->next;\n        if (buf != NULL) {\n            strncpy(buf, temp->value, bufsize - 1);\n            buf[bufsize - 1] = '\\0';\n        }\n        free(temp->value);\n        free(temp);\n        --q->size;\n    }\n    return true;\n}\n```\n\n这里注意一下`strncpy`的用法就好了，要保证`buf`是 C-Style 的字符数组。\n\n## 获取队列长度\n\n```c\n/**\n * @brief Returns the number of elements in a queue\n *\n * This function runs in O(1) time.\n *\n * @param[in] q The queue to examine\n *\n * @return the number of elements in the queue, or\n *         0 if q is NULL or empty\n */\nsize_t queue_size(queue_t *q) {\n    /* You need to write the code for this function */\n    /* Remember: It should operate in O(1) time */\n    if (q == NULL) {\n        return 0;\n    } else {\n        return q->size;\n    }\n}\n```\n\n这没什么好说的，在前面执行入队、出队的时候不要忘记修改`size`的值就可以，这里只需要直接返回，而不需要通过遍历队列的方式去计算。\n\n## 反转队列\n\n```c\n/**\n * @brief Reverse the elements in a queue\n *\n * This function does not allocate or free any list elements, i.e. it does\n * not call malloc or free, including inside helper functions. Instead, it\n * rearranges the existing elements of the queue.\n *\n * @param[in] q The queue to reverse\n */\nvoid queue_reverse(queue_t *q) {\n    /* You need to write the code for this function */\n    if (q == NULL || q->head == NULL) {\n        return;\n    } else {\n        list_ele_t *oldHead = q->head;\n        list_ele_t *oldTail = q->tail;\n\n        list_ele_t *temp = q->head;\n        list_ele_t *prev = NULL;\n        list_ele_t *next = NULL;\n        while (temp != NULL) {\n            next = temp->next;\n            temp->next = prev;\n            prev = temp;\n            temp = next;\n        }\n        q->head = oldTail;\n        q->tail = oldHead;\n    }\n}\n```\n\n经典的反转链表，这里就不赘述了。\n\n## 测试\n\n一共是提供了十五组测试用例，满分一百，包括了对各个函数及其性能的测试(测试尾部入队 10000 个元素)，还有鲁棒性测试（释放空队列的空间，从空队列中移除头部元素等），还是比较全面的。","src/content/posts/cmu_15-213_lab0.md","f48bd4e52ac621d6",{"html":323,"metadata":324},"\u003Ch1 id=\"概述\">概述\u003C/h1>\n\u003Cp>利用 C 语言实现一个队列的基本功能，包括：\u003C/p>\n\u003Cul>\n\u003Cli>创建队列\u003C/li>\n\u003Cli>销毁队列\u003C/li>\n\u003Cli>头部入队\u003C/li>\n\u003Cli>尾部入队\u003C/li>\n\u003Cli>头部出队\u003C/li>\n\u003Cli>获取队列长度\u003C/li>\n\u003Cli>反转队列\u003C/li>\n\u003C/ul>\n\u003Cp>核心在于每次对队列操作前都要考虑是否为空的情况，保证代码的鲁棒性。\u003C/p>\n\u003Ch2 id=\"头文件\">头文件\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Clink rel=\"stylesheet\" href=\"/_astro/ec.6xp1a.css\">\u003Cscript type=\"module\" src=\"/_astro/ec.8zarh.js\">\u003C/script>\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;stdbool.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">#include\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">&#x3C;stddef.h>\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* element struct in queue */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">typedef\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">struct\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> list_ele {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">value;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">struct\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> list_ele \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">next;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">typedef\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">struct\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tail;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">int\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> size;\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // use the above two variable to record the size of the queue to avoid traversal\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Create empty queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_new\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Free ALL storage used by queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Attempt to insert element at head of queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_insert_head\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Attempt to insert element at tail of queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_insert_tail\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Attempt to remove element from head of queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_remove_head\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">sp\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">size_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">bufsize\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Return number of elements in queue. */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">size_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_size\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Reverse elements in queue */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_reverse\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"#include \u003Cstdbool.h>#include \u003Cstddef.h>/* element struct in queue */typedef struct list_ele {    char *value;    struct list_ele *next;} list_ele_t;typedef struct {    list_ele_t *head;    list_ele_t *tail;    int size; // use the above two variable to record the size of the queue to avoid traversal} queue_t;/* Create empty queue. */queue_t *queue_new(void);/* Free ALL storage used by queue. */void queue_free(queue_t *q);/* Attempt to insert element at head of queue. */bool queue_insert_head(queue_t *q, const char *s);/* Attempt to insert element at tail of queue. */bool queue_insert_tail(queue_t *q, const char *s);/* Attempt to remove element from head of queue. */bool queue_remove_head(queue_t *q, char *sp, size_t bufsize);/* Return number of elements in queue. */size_t queue_size(queue_t *q);/* Reverse elements in queue */void queue_reverse(queue_t *q);\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>可以看到，在源文件的基础上，新增了尾节点和队列大小两个属性，当然也可以不加，但如果没有这两个变量，计算队列大小或者进行尾部入队操作的时间复杂度就不是常量了，而是线性增长的。\u003C/p>\n\u003Cp>下面我们具体看每个函数的实现。\u003C/p>\n\u003Ch2 id=\"创建队列\">创建队列\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Allocates a new queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The new queue, or NULL if memory allocation failed\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_new\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* What if malloc returned NULL? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->size \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Allocates a new queue * @return The new queue, or NULL if memory allocation failed */queue_t *queue_new(void) {    queue_t *q = malloc(sizeof(queue_t));    /* What if malloc returned NULL? */    if (q == NULL) {        return NULL;    } else {        q->head = NULL;        q->tail = NULL;        q->size = 0;        return q;    }}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>这一步没什么问题，主要就是分配队列空间并初始化队列的各个属性。\u003C/p>\n\u003Ch2 id=\"销毁队列\">销毁队列\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Frees all memory used by a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The queue to free\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* How about freeing the list elements and the strings? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Free queue structure */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tmp;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">tmp \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head->next;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(tmp->value);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // free element's value\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(tmp)\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // free element itself\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(q);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // free queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Frees all memory used by a queue * @param[in] q The queue to free */void queue_free(queue_t *q) {    /* How about freeing the list elements and the strings? */    /* Free queue structure */    if (q == NULL) {        return;    } else {        list_ele_t *tmp;        while (q->head != NULL) {            tmp = q->head;            q->head = q->head->next;            free(tmp->value); // free element&#x27;s value            free(tmp) // free element itself        }    }    free(q); // free queue}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>如上所述，判断完队列是否为空，还需要判断队列的属性是否为空。\u003C/p>\n\u003Ch2 id=\"头部入队\">头部入队\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Attempts to insert an element at head of a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* This function explicitly allocates space to create a copy of `s`.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* The inserted element points to a copy of `s`, instead of `s` itself.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The queue to insert into\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> String to be copied and inserted into the queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> true if insertion was successful\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> false if q is NULL, or memory allocation failed\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_insert_head\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newh;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* What should you do if the q is NULL? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Don't forget to allocate space for the string and copy it */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* What if either call to malloc returns NULL? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newh \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (newh \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newh->value \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strlen\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(s) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">+\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (newh->value \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(newh);\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> // must free the space if malloc failed\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strcpy\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(newh->value, s);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newh->next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newh;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">                \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newh;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->size;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">true\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Attempts to insert an element at head of a queue * * This function explicitly allocates space to create a copy of &#x60;s&#x60;. * The inserted element points to a copy of &#x60;s&#x60;, instead of &#x60;s&#x60; itself. * * @param[in] q The queue to insert into * @param[in] s String to be copied and inserted into the queue * * @return true if insertion was successful * @return false if q is NULL, or memory allocation failed */bool queue_insert_head(queue_t *q, const char *s) {    list_ele_t *newh;    /* What should you do if the q is NULL? */    if (q == NULL) {        return false;    }    /* Don&#x27;t forget to allocate space for the string and copy it */    /* What if either call to malloc returns NULL? */    newh = malloc(sizeof(list_ele_t));    if (newh == NULL) {        return false;    } else {        newh->value = malloc(sizeof(char) * (strlen(s) + 1));        if (newh->value == NULL) {            free(newh); // must free the space if malloc failed            return false;        } else {            strcpy(newh->value, s);            newh->next = q->head;            q->head = newh;            if (q->tail == NULL) {                q->tail = newh;            }            ++q->size;            return true;        }    }}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>除了判断队列及队列元素是否为空，还要判断\u003Ccode>malloc()\u003C/code>是否成功，\n正常来讲，内存分配成功的话，会返回一个可以指向任意类型的指针，但该指针必须通过\u003Ccode>free()\u003C/code>或者\u003Ccode>realloc()\u003C/code>回收。\n如果分配失败了，会返回一个空指针，我们需要对其进行判断。\u003C/p>\n\u003Ch2 id=\"尾部入队\">尾部入队\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Attempts to insert an element at tail of a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* This function explicitly allocates space to create a copy of `s`.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* The inserted element points to a copy of `s`, instead of `s` itself.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The queue to insert into\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> String to be copied and inserted into the queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> true if insertion was successful\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> false if q is NULL, or memory allocation failed\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_insert_tail\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">const\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">s\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* You need to write the complete code for this function */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Remember: It should operate in O(1) time */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newt;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* What should you do if the q is NULL? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Don't forget to allocate space for the string and copy it */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* What if either call to malloc returns NULL? */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newt \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (newt \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newt->value \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">malloc\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">sizeof\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (\u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strlen\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(s) \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">+\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">));\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (newt->value \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(newt);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strcpy\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(newt->value, s);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">newt->next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">                \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail->next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newt;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">                \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newt;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">                \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newt;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">                \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> newt;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">++\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->size;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">true\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Attempts to insert an element at tail of a queue * * This function explicitly allocates space to create a copy of &#x60;s&#x60;. * The inserted element points to a copy of &#x60;s&#x60;, instead of &#x60;s&#x60; itself. * * @param[in] q The queue to insert into * @param[in] s String to be copied and inserted into the queue * * @return true if insertion was successful * @return false if q is NULL, or memory allocation failed */bool queue_insert_tail(queue_t *q, const char *s) {    /* You need to write the complete code for this function */    /* Remember: It should operate in O(1) time */    list_ele_t *newt;    /* What should you do if the q is NULL? */    if (q == NULL) {        return false;    }    /* Don&#x27;t forget to allocate space for the string and copy it */    /* What if either call to malloc returns NULL? */    newt = malloc(sizeof(list_ele_t));    if (newt == NULL) {        return false;    } else {        newt->value = malloc(sizeof(char) * (strlen(s) + 1));        if (newt->value == NULL) {            free(newt);            return false;        } else {            strcpy(newt->value, s);            newt->next = NULL;            if (q->tail != NULL) {                q->tail->next = newt;                q->tail = newt;            } else {                q->head = newt;                q->tail = newt;            }            ++q->size;            return true;        }    }}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>这一步和头部入队类似，不同点在于需要对尾节点是否存在进行判断，而头部入队时是不需要判断头节点是否存在的，因为必然要进行重新分配且不需要对其执行查找下一个节点的操作。\u003C/p>\n\u003Ch2 id=\"头部出队\">头部出队\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Attempts to remove an element from head of a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* If removal succeeds, this function frees all memory used by the\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* removed list element and its string value before returning.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* If removal succeeds and `buf` is non-NULL, this function copies up to\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* `bufsize - 1` characters from the removed string into `buf`, and writes\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* a null terminator '\\0' after the copied string.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">]  \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">       The queue to remove from\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">out\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">buf\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">     Output buffer to write a string value into\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">]  \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">bufsize\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Size of the buffer `buf` points to\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> true if removal succeeded\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> false if q is NULL or empty\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">bool\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_remove_head\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">char\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">buf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">, \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">size_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">bufsize\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">false\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">temp \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head->next;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (buf \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">strncpy\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(buf, temp->value, bufsize \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">-\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">            \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">buf\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">[bufsize \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">-\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">1\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">] \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">\\0\u003C/span>\u003Cspan style=\"--0:#9ECBFF;--1:#032F62\">'\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(temp->value);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">free\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(temp);\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">--\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->size;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">true\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Attempts to remove an element from head of a queue * * If removal succeeds, this function frees all memory used by the * removed list element and its string value before returning. * * If removal succeeds and &#x60;buf&#x60; is non-NULL, this function copies up to * &#x60;bufsize - 1&#x60; characters from the removed string into &#x60;buf&#x60;, and writes * a null terminator &#x27;\\0&#x27; after the copied string. * * @param[in]  q       The queue to remove from * @param[out] buf     Output buffer to write a string value into * @param[in]  bufsize Size of the buffer &#x60;buf&#x60; points to * * @return true if removal succeeded * @return false if q is NULL or empty */bool queue_remove_head(queue_t *q, char *buf, size_t bufsize) {    if (q == NULL) {        return false;    }    if (q->head == NULL) {        return false;    } else {        list_ele_t *temp = q->head;        q->head = q->head->next;        if (buf != NULL) {            strncpy(buf, temp->value, bufsize - 1);            buf[bufsize - 1] = &#x27;\\0&#x27;;        }        free(temp->value);        free(temp);        --q->size;    }    return true;}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>这里注意一下\u003Ccode>strncpy\u003C/code>的用法就好了，要保证\u003Ccode>buf\u003C/code>是 C-Style 的字符数组。\u003C/p>\n\u003Ch2 id=\"获取队列长度\">获取队列长度\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Returns the number of elements in a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* This function runs in O(1) time.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The queue to examine\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@return\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> the number of elements in the queue, or\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*         0 if q is NULL or empty\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">size_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_size\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* You need to write the code for this function */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* Remember: It should operate in O(1) time */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">0\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->size;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Returns the number of elements in a queue * * This function runs in O(1) time. * * @param[in] q The queue to examine * * @return the number of elements in the queue, or *         0 if q is NULL or empty */size_t queue_size(queue_t *q) {    /* You need to write the code for this function */    /* Remember: It should operate in O(1) time */    if (q == NULL) {        return 0;    } else {        return q->size;    }}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>这没什么好说的，在前面执行入队、出队的时候不要忘记修改\u003Ccode>size\u003C/code>的值就可以，这里只需要直接返回，而不需要通过遍历队列的方式去计算。\u003C/p>\n\u003Ch2 id=\"反转队列\">反转队列\u003C/h2>\n\u003Cdiv class=\"expressive-code\">\u003Cfigure class=\"frame\">\u003Cfigcaption class=\"header\">\u003C/figcaption>\u003Cpre data-language=\"c\">\u003Ccode>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/**\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@brief\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> Reverse the elements in a queue\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* This function does not allocate or free any list elements, i.e. it does\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* not call malloc or free, including inside helper functions. Instead, it\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* rearranges the existing elements of the queue.\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">* \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">@param\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">[\u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">in\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">] \u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> The queue to reverse\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\"> \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">*/\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#F97583;--1:#BF3441\">void\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#B392F0;--1:#6F42C1\">queue_reverse\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">(\u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">queue_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#FFAB70;--1:#AE4B07\">q\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#99A0A6;--1:#616972\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#99A0A6;--1:#616972\">/* You need to write the code for this function */\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">    \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">if\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (q \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">||\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">==\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">return\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">} \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">else\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">oldHead \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">oldTail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->tail;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\n\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">temp \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> q->head;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">prev \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">list_ele_t\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">*\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">        \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">while\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> (temp \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">!=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> \u003C/span>\u003Cspan style=\"--0:#79B8FF;--1:#005CC5\">NULL\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">) {\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> temp->next;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">temp->next \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> prev;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">prev \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> temp;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">            \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">temp \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> next;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->head \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> oldTail;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">        \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">q->tail \u003C/span>\u003Cspan style=\"--0:#F97583;--1:#BF3441\">=\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\"> oldHead;\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan class=\"indent\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">    \u003C/span>\u003C/span>\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003Cdiv class=\"ec-line\">\u003Cdiv class=\"code\">\u003Cspan style=\"--0:#E1E4E8;--1:#24292E\">}\u003C/span>\u003C/div>\u003C/div>\u003C/code>\u003C/pre>\u003Cdiv class=\"copy\">\u003Cbutton title=\"Copy to clipboard\" data-copied=\"Copied!\" data-code=\"/** * @brief Reverse the elements in a queue * * This function does not allocate or free any list elements, i.e. it does * not call malloc or free, including inside helper functions. Instead, it * rearranges the existing elements of the queue. * * @param[in] q The queue to reverse */void queue_reverse(queue_t *q) {    /* You need to write the code for this function */    if (q == NULL || q->head == NULL) {        return;    } else {        list_ele_t *oldHead = q->head;        list_ele_t *oldTail = q->tail;        list_ele_t *temp = q->head;        list_ele_t *prev = NULL;        list_ele_t *next = NULL;        while (temp != NULL) {            next = temp->next;            temp->next = prev;            prev = temp;            temp = next;        }        q->head = oldTail;        q->tail = oldHead;    }}\">\u003Cdiv>\u003C/div>\u003C/button>\u003C/div>\u003C/figure>\u003C/div>\n\u003Cp>经典的反转链表，这里就不赘述了。\u003C/p>\n\u003Ch2 id=\"测试\">测试\u003C/h2>\n\u003Cp>一共是提供了十五组测试用例，满分一百，包括了对各个函数及其性能的测试(测试尾部入队 10000 个元素)，还有鲁棒性测试（释放空队列的空间，从空队列中移除头部元素等），还是比较全面的。\u003C/p>",{"headings":325,"imagePaths":344,"frontmatter":345},[326,327,328,330,332,334,336,338,340,342],{"depth":141,"slug":276,"text":276},{"depth":26,"slug":278,"text":278},{"depth":26,"slug":329,"text":329},"创建队列",{"depth":26,"slug":331,"text":331},"销毁队列",{"depth":26,"slug":333,"text":333},"头部入队",{"depth":26,"slug":335,"text":335},"尾部入队",{"depth":26,"slug":337,"text":337},"头部出队",{"depth":26,"slug":339,"text":339},"获取队列长度",{"depth":26,"slug":341,"text":341},"反转队列",{"depth":26,"slug":343,"text":343},"测试",[],{"title":315,"date":318,"tags":346,"summary":37,"draft":38,"author":39},[288,317],"cmu_15-213_lab0.md"]