---
import { useLocale } from '@utils/locale'
import ThemeSelect from '../components/ThemeSelect.astro'
import LanguageSelect from '../components/LanguageSelect.astro'

const { url } = Astro
const { path } = useLocale(url)

// detect current language from URL
function getCurrentLanguage() {
  if (url.pathname.startsWith('/en/')) return 'en'
  if (url.pathname.startsWith('/zh/')) return 'zh'
  if (url.pathname === '/') return 'zh' // root path is Chinese
  return 'zh' // default
}

const currentLang = getCurrentLanguage()

// get the correct home URL based on current language
function getHomeUrl() {
  if (currentLang === 'en') return '/en/'
  if (url.pathname === '/') return '/' // stay on root for Chinese
  return '/zh/'
}
---

<div class="my-6 flex">
  <a
    href={getHomeUrl()}
    class="hover:cursor-pointer opacity-100 hover:opacity-80 no-underline"
  >
    <i class="hidden">website header </i>
    <h1 class="text-4xl leading-tight font-bold text-black dark:text-white">
      John Wick
    </h1>
  </a>
  <div class="text-sm ml-auto flex items-center gap-2">
    <LanguageSelect />
    <ThemeSelect />
  </div>
</div>