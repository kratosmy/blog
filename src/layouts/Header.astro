---
import { useLocale } from '@utils/locale'
import ThemeSelect from '../components/ThemeSelect.astro'
import LanguageSelect from '../components/LanguageSelect.astro'

const { url } = Astro
const { path } = useLocale(url)

// detect current language from URL
function getCurrentLanguage() {
  if (url.pathname.startsWith('/en/')) return 'en'
  if (url.pathname.startsWith('/zh/')) return 'zh'
  return 'zh' // default
}

const currentLang = getCurrentLanguage()
---

<div class="my-6 flex">
  <a
    href={`/${currentLang}/`}
    class="hover:cursor-pointer opacity-100 hover:opacity-80 no-underline"
  >
    <i class="hidden">website header </i>
    <h1 class="text-4xl leading-tight font-bold text-black dark:text-white">
      John Wick
    </h1>
  </a>
  <div class="text-sm place-content-center inline ml-auto flex items-center gap-3">
    <LanguageSelect />
    <ThemeSelect />
  </div>
</div>